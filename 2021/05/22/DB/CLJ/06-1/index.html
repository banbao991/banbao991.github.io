<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>数据库概论.陈立军.06.事务(2) 事务隔离性 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="事务、事务隔离性级别（read uncommitted、read uncommitted、repeatable read、serializable）、快照隔离 SI、语句级快照隔离 RCSI">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库概论.陈立军.06.事务(2) 事务隔离性">
<meta property="og:url" content="http://example.com/2021/05/22/DB/CLJ/06-1/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="事务、事务隔离性级别（read uncommitted、read uncommitted、repeatable read、serializable）、快照隔离 SI、语句级快照隔离 RCSI">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2021/05/22/DB/CLJ/06-1/06-1/image-20210524150236052.png">
<meta property="article:published_time" content="2021-05-22T03:32:28.000Z">
<meta property="article:modified_time" content="2021-05-24T07:41:12.763Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="DB">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/05/22/DB/CLJ/06-1/06-1/image-20210524150236052.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-DB/CLJ/06-1" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/05/22/DB/CLJ/06-1/" class="article-date">
  <time class="dt-published" datetime="2021-05-22T03:32:28.000Z" itemprop="datePublished">2021-05-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/DB-CLJ/">DB.CLJ</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      数据库概论.陈立军.06.事务(2) 事务隔离性
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><h2 id="事务隔离性级别"><a href="#事务隔离性级别" class="headerlink" title="事务隔离性级别"></a>事务隔离性级别</h2><h3 id="SQL-中隔离性级别的定义"><a href="#SQL-中隔离性级别的定义" class="headerlink" title="SQL 中隔离性级别的定义"></a>SQL 中隔离性级别的定义</h3><ul>
<li>（事务隔离性级别从低到高）</li>
<li>read uncommitted<ul>
<li>允许读取未提交的记录</li>
</ul>
</li>
<li>read uncommitted<ul>
<li>只允许读取已提交的记录，但不要求可重复读</li>
</ul>
</li>
<li>repeatable read<ul>
<li>只允许读取已提交的记录，并且一个事务对同一记录的两次读取之间，其它事务不能对该记录进行更新</li>
</ul>
</li>
<li>serializable<ul>
<li>调度的执行必须等价于串行调度</li>
</ul>
</li>
</ul>
<h3 id="隔离性级别的内部实现"><a href="#隔离性级别的内部实现" class="headerlink" title="隔离性级别的内部实现"></a>隔离性级别的内部实现</h3><ul>
<li>在数据库内部，如果一个事务要对某个记录项进行读或写操作，要先获得这个数据项上的读锁或者写锁，这由<strong>锁管理器</strong>统一控制<ul>
<li>读 S 锁，写 X 锁</li>
<li>二者不兼容，只能有一个锁</li>
</ul>
</li>
<li>写事务 W，读事务 R，锁管理器 L<ul>
<li>以下是不同隔离性级别的内部实现</li>
</ul>
</li>
</ul>
<h4 id="read-uncommitted"><a href="#read-uncommitted" class="headerlink" title="read uncommitted"></a>read uncommitted</h4><ul>
<li>W：申请 X 锁</li>
<li>L：同意（X 锁被加上）</li>
<li>R：读取数据项（不需要申请 S 锁）</li>
</ul>
<h4 id="read-committed"><a href="#read-committed" class="headerlink" title="read committed"></a>read committed</h4><ul>
<li>W：申请 X 锁</li>
<li>L：同意（X 锁被加上）</li>
<li>R：申请 S 锁（阻塞），等待</li>
<li>W：提交（释放 X 锁）</li>
<li>L：同意 R 读（S 锁被加上）</li>
<li>R：读取数据项</li>
</ul>
<h5 id="read-commited-不能实现-repeatable-read"><a href="#read-commited-不能实现-repeatable-read" class="headerlink" title="read commited 不能实现 repeatable read"></a>read commited 不能实现 repeatable read</h5><ul>
<li>R：申请 S 锁</li>
<li>L：同意（S 锁被加上）</li>
<li>R：读取数据项（读完立刻释放 S 锁）</li>
<li>W：申请 X 锁</li>
<li>L：同意（X 锁被加上）</li>
<li>W：提交（X 锁被释放）</li>
<li>R：读取数据项，（<strong>读取到的数据与之前不一致</strong>）</li>
</ul>
<h5 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h5><ul>
<li><span style="color:red;font-weight:bold">read committed 的读锁是短锁</span><ul>
<li>短锁：操作一执行完，锁立即释放</li>
<li>长锁：长锁会一直到保持到事务结束，提交之后才释放</li>
</ul>
</li>
<li><strong>只有读事务有短锁和长锁的区别，写事务都是长锁</strong></li>
</ul>
<h4 id="repeatable-read"><a href="#repeatable-read" class="headerlink" title="repeatable read"></a>repeatable read</h4><ul>
<li>R：申请 S 锁</li>
<li>L：同意（S 锁被加上）</li>
<li>R：读取数据项（S 锁是长锁）</li>
<li>W：申请 X 锁（阻塞）等待</li>
<li>R：读取数据项（<strong>读取到的数据与之前一致</strong>）</li>
<li>R：提交（S 锁被释放）</li>
<li>L：同意（X 锁被加上）</li>
<li>W：提交（X 锁被释放）</li>
</ul>
<h3 id="隔离性级别与不一致现象的关系"><a href="#隔离性级别与不一致现象的关系" class="headerlink" title="隔离性级别与不一致现象的关系"></a>隔离性级别与不一致现象的关系</h3><table>
<thead>
<tr>
<th align="center">隔离性级别</th>
<th align="center">读脏数据</th>
<th align="center">不能重复读</th>
<th align="center">幻象</th>
<th align="center">丢失修改</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Read uncommitted</td>
<td align="center">是</td>
<td align="center">是</td>
<td align="center">是</td>
<td align="center">是</td>
</tr>
<tr>
<td align="center">Read committed</td>
<td align="center">否</td>
<td align="center">是</td>
<td align="center">是</td>
<td align="center"><span style="color:red;font-weight:bold">是</span></td>
</tr>
<tr>
<td align="center">Repeatable read</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center"><span style="color:red;font-weight:bold">是</span></td>
<td align="center">否</td>
</tr>
<tr>
<td align="center">Serializable</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
</tr>
</tbody></table>
<h3 id="具体场景的演示"><a href="#具体场景的演示" class="headerlink" title="具体场景的演示"></a>具体场景的演示</h3><h4 id="read-uncommitted-下发生脏读"><a href="#read-uncommitted-下发生脏读" class="headerlink" title="read uncommitted 下发生脏读"></a>read uncommitted 下发生脏读</h4><table>
<thead>
<tr>
<th align="center">事务1</th>
<th align="center">事务2</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center">set transaction isolation level <span style="color:red;font-weight:bold">read uncommitted</span></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">begin tran<br/>select sname from S<br/>where sname &#x3D; ‘王红’<br/>–只有一个学生名为王红</td>
</tr>
<tr>
<td align="center">begin tran<br/>update S<br/>set sname&#x3D; ‘王红’</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">select sname from S<br/>where sname&#x3D; ‘王红’<br/>–所有学生姓名均为王红</td>
</tr>
<tr>
<td align="center">rollback tran</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">select sname from S<br/>where sname&#x3D;’王红’<br/>–只有一个学生名为王红</td>
</tr>
</tbody></table>
<h4 id="read-committed-下避免脏读"><a href="#read-committed-下避免脏读" class="headerlink" title="read committed 下避免脏读"></a>read committed 下避免脏读</h4><table>
<thead>
<tr>
<th align="center">事务1</th>
<th align="center">事务2</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center">set transaction isolation level <span style="color:red;font-weight:bold">read committed</span></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">begin tran</td>
</tr>
<tr>
<td align="center">begin tran<br/>update S<br/>set sname&#x3D; ‘王红’</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">select sname from S<br/>where sname&#x3D;’王红’<br/>–阻塞，”正在执行批查询”</td>
</tr>
<tr>
<td align="center">commit tran</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">–所有学生姓名均为王红</td>
</tr>
</tbody></table>
<h4 id="read-committed-下发生不可重复读"><a href="#read-committed-下发生不可重复读" class="headerlink" title="read committed 下发生不可重复读"></a>read committed 下发生不可重复读</h4><table>
<thead>
<tr>
<th align="center">事务1</th>
<th align="center">事务2</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center">set transaction isolation level <span style="color:red;font-weight:bold">read committed</span></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">begin tran<br/>select sname from S<br/>where sname&#x3D; ‘王红’<br/>–只有一个学生名为王红</td>
</tr>
<tr>
<td align="center">begin tran<br/>update S<br/>set sname&#x3D;’王红’<br/>commit tran</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">select sname from S<br/>where sname&#x3D; ‘王红’<br/>–所有学生姓名均为王红</td>
</tr>
</tbody></table>
<h4 id="repeatable-read-下避免不可重复读"><a href="#repeatable-read-下避免不可重复读" class="headerlink" title="repeatable read 下避免不可重复读"></a>repeatable read 下避免不可重复读</h4><table>
<thead>
<tr>
<th align="center">事务1</th>
<th align="center">事务2</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center">set transaction isolation level <span style="color:red;font-weight:bold">repeatable read</span></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">begin tran<br/>select sname from S<br/>where sname&#x3D; ‘王红’<br/>–有一个学生名为王红</td>
</tr>
<tr>
<td align="center">begin tran<br/>update S<br/>set sname&#x3D;’王明’<br/>where sname&#x3D;’王红’<br/>–<span style="color:red;font-weight:bold">阻塞</span></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">select sname from S<br/>where sname&#x3D; ‘王红’<br/>–有一个学生名为王红</td>
</tr>
</tbody></table>
<h4 id="repeatable-read-下发生幻象"><a href="#repeatable-read-下发生幻象" class="headerlink" title="repeatable read 下发生幻象"></a>repeatable read 下发生幻象</h4><ul>
<li>对于其他事务的 insert 操作，无法阻塞</li>
</ul>
<table>
<thead>
<tr>
<th align="center">事务1</th>
<th align="center">事务2</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center">set transaction isolation level <span style="color:red;font-weight:bold">repeatable read</span></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">begin tran<br/>select snamef rom S<br/>where sname&#x3D; ‘王%’<br/>–只有一个学生，名为王红</td>
</tr>
<tr>
<td align="center">insert into S values(‘s08’, ‘王明’, 23, 1)</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">select sname from S<br/>where sname&#x3D; ‘王%’<br/>–有两个学生，名为王红和王明</td>
</tr>
</tbody></table>
<h4 id="serializable-下避免幻象"><a href="#serializable-下避免幻象" class="headerlink" title="serializable 下避免幻象"></a>serializable 下避免幻象</h4><table>
<thead>
<tr>
<th align="center">事务1</th>
<th align="center">事务2</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center">set transaction isolation level <span style="color:red;font-weight:bold">serializable</span></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">begin tran<br/>select snamef rom S<br/>where sname&#x3D; ‘王%’<br/>–只有一个学生，名为王红</td>
</tr>
<tr>
<td align="center">insert into S values(‘s08’, ‘王明’, 23, 1)<br/>–阻塞</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">select sname from S<br/>where sname&#x3D; ‘王%’<br/>–只有一个学生，名为王红</td>
</tr>
</tbody></table>
<h4 id="read-committed-下的丢失修改"><a href="#read-committed-下的丢失修改" class="headerlink" title="read committed 下的丢失修改"></a>read committed 下的丢失修改</h4><ul>
<li>注意读和读不会发生不一致现象，允许多个事务同时申请读锁</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> chair(</span><br><span class="line">    seat_id <span class="type">int</span>,</span><br><span class="line">    host <span class="type">char</span>(<span class="number">10</span>)</span><br><span class="line">)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> chair <span class="keyword">values</span> (<span class="number">1</span>,<span class="keyword">null</span>),(<span class="number">2</span>,<span class="keyword">null</span>),(<span class="number">3</span>,<span class="keyword">null</span>),(<span class="number">4</span>,<span class="keyword">null</span>)</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">事务1</th>
<th align="center">事务2</th>
</tr>
</thead>
<tbody><tr>
<td align="center">set transaction isolation level <span style="color:red;font-weight:bold">read committed</span></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">begin tran</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">set transaction isolation level <span style="color:red;font-weight:bold">read committed</span></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">begin tran</td>
</tr>
<tr>
<td align="center">select seat_id from chair<br/>where host is null</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">select seat_id from chair<br/>where host is null<br />–<span style="color:red;font-weight:bold">read committed 的读锁是短锁，操作完马上释放</span></td>
</tr>
<tr>
<td align="center">update chair set host&#x3D;’tom’<br/>where seat_id&#x3D;1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">commit</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">update chair set host&#x3D;’jerry’ where seat_id&#x3D;1<br/>update chair set host&#x3D;’bob’ where seat_id&#x3D;2</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">commit</td>
</tr>
</tbody></table>
<ul>
<li>将事务 2 的隔离性级别修改为 repeatable read<ul>
<li>这样事务 1 的 update 操作会被阻塞</li>
<li>但是事务 2 的 update 操作也会被阻塞，引发死锁</li>
<li>数据库中有专门的进程定期做死锁检测，检测到死锁会撤销一个事务，打开死锁</li>
</ul>
</li>
</ul>
<h3 id="不同隔离性级别下的可能调度"><a href="#不同隔离性级别下的可能调度" class="headerlink" title="不同隔离性级别下的可能调度"></a>不同隔离性级别下的可能调度</h3><ul>
<li>考虑关系 <code>Employee(ID,salary)</code>，有两个元组 <code>(A,20)</code> 和 <code>(B,30)</code></li>
<li>两个事务 T1，T2 如下</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- T1:</span></span><br><span class="line"><span class="keyword">begin</span> transaction;</span><br><span class="line"><span class="keyword">update</span> Employee <span class="keyword">set</span> salary <span class="operator">=</span> <span class="number">2</span><span class="operator">*</span>salary <span class="keyword">where</span> ID<span class="operator">=</span><span class="string">&#x27;A&#x27;</span>;  <span class="comment">-- t11</span></span><br><span class="line"><span class="keyword">update</span> Employee <span class="keyword">set</span> salary <span class="operator">=</span> salary<span class="operator">+</span><span class="number">10</span> <span class="keyword">where</span> ID<span class="operator">=</span><span class="string">&#x27;A&#x27;</span>; <span class="comment">-- t12</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- T2:</span></span><br><span class="line"><span class="keyword">begin</span> transaction;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(salary) <span class="keyword">as</span> sal1 <span class="keyword">from</span> Employee;            <span class="comment">-- t21</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(salary) <span class="keyword">as</span> sal2 <span class="keyword">from</span> Employee;            <span class="comment">-- t22</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>给出 T2 在不同隔离性级别下所返回的 sal1 与 sal2 所有可能的值的情况</li>
<li>思路：列出所有调度的可能性，在不同的隔离性级别下判断是否能够成立</li>
</ul>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">S1: t11, t12, t21, t22 -&gt; (sal1, sal2) = (80,80)</span><br><span class="line">S2: t11, t21, t12, t22 -&gt; (sal1, sal2) = (70,80)</span><br><span class="line">S3: t11, t21, t22, t12 -&gt; (sal1, sal2) = (70,70)</span><br><span class="line">S4: t21, t22, t11, t12 -&gt; (sal1, sal2) = (50,50)</span><br><span class="line">S5: t21, t11, t22, t12 -&gt; (sal1, sal2) = (50,70)</span><br><span class="line">S6: t21, t11, t12, t22 -&gt; (sal1, sal2) = (50,80)</span><br></pre></td></tr></table></figure>

<ul>
<li>read uncommitted<ul>
<li>S1,S2,S3,S4,S5,S6</li>
</ul>
</li>
<li>read committed（读短锁，写长锁）<ul>
<li>S1,S4,S6</li>
</ul>
</li>
<li>repeatable read<ul>
<li>S1,S4</li>
</ul>
</li>
<li>serializable<ul>
<li>S1,S4</li>
</ul>
</li>
</ul>
<h3 id="乐观锁定：快照隔离-SI"><a href="#乐观锁定：快照隔离-SI" class="headerlink" title="乐观锁定：快照隔离 SI"></a>乐观锁定：快照隔离 SI</h3><ul>
<li>Snapshot Isolation</li>
<li>上述的隔离性是通过<strong>内部封锁</strong>来实现的（锁管理器）</li>
<li>这样的设计是有代价的，<strong>锁请求</strong></li>
<li>如果在某个应用场景下，只有很多读事务，产生冲突的可能性很小，加锁的方式效率很低<ul>
<li>不必要加锁</li>
</ul>
</li>
<li>也就是说写操作比较多的时候，冲突较多的时候，加锁才是一个好的解决方法<ul>
<li>锁：悲观的态度，假定冲突概率很高</li>
</ul>
</li>
<li>乐观的态度：假定发生冲突的概率很小</li>
</ul>
<h4 id="快照隔离-SI"><a href="#快照隔离-SI" class="headerlink" title="快照隔离 SI"></a>快照隔离 SI</h4><ul>
<li><strong>一旦检测到冲突，把某个事务回滚</strong></li>
<li>通过<strong>多版本</strong>的方式实现的<ul>
<li>更新事务修改数据项的时候形成一个新的版本</li>
</ul>
</li>
<li>一些关系<ul>
<li>读不会阻塞写</li>
<li>写不会阻塞读</li>
<li><strong>写发生在提交时</strong></li>
<li>冲突时先提交者赢</li>
</ul>
</li>
<li>一个例子：左到右时间顺序<ul>
<li>T2 先提交，回滚 T4，因此 T3 保留下来了</li>
<li>T5 读取到的结果是一开始的，T5 开始的时候，T3 还没写（提交才写）<ul>
<li><strong>标准的快照隔离只能读取到事务一开始的版本</strong></li>
</ul>
</li>
<li>T1 事务无论在什么时候发出读命令，读取到的 X 都是一开始的</li>
<li>T7 读取的是 T6 更新的结果</li>
</ul>
</li>
</ul>
<img src="06-1/image-20210524150236052.png" style="zoom:67%;" />



<h4 id="快照隔离中的不一致现象"><a href="#快照隔离中的不一致现象" class="headerlink" title="快照隔离中的不一致现象"></a>快照隔离中的不一致现象</h4><ul>
<li>一致性要求：A+B &gt;&#x3D; 0</li>
<li>当前：A＋B＝5</li>
<li>调度：r1(x), r1(y), r2(x), r2(y), w1(y), w2(x)</li>
<li>T1、T2 分别将 x、y 减去 5，发生了什么？<ul>
<li>调度可以执行，但是最终的结果是不满足一致性的</li>
</ul>
</li>
<li>问题原因：<strong>写偏斜</strong><ul>
<li>两个事务写不同的数据项</li>
</ul>
</li>
<li>悲观锁定的情况下，repeatable read 会防止这种情况的发生<ul>
<li><strong>读长锁</strong>，后面的写操作阻塞</li>
</ul>
</li>
<li>写偏斜的另外一个例子<ul>
<li>初始值：x&#x3D;3, y&#x3D;5</li>
<li>T1: x :&#x3D; y；T2: y :&#x3D; x</li>
<li>SI 下 r1(x), r1(y), r2(x), r2(y), w1(y), w2(x) 的结果是什么？<ul>
<li>x&#x3D;5, y&#x3D;3</li>
</ul>
</li>
<li>串行的结果：(3,3) 或者 (5,5)</li>
</ul>
</li>
</ul>
<h4 id="SQL-Server-下的快照隔离"><a href="#SQL-Server-下的快照隔离" class="headerlink" title="SQL Server 下的快照隔离"></a>SQL Server 下的快照隔离</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database demo</span><br><span class="line">use demo</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> isolation_1 (</span><br><span class="line">    id1 <span class="type">int</span>,</span><br><span class="line">    des <span class="type">varchar</span>(<span class="number">100</span>)</span><br><span class="line">)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> isolation_1 <span class="keyword">values</span>(<span class="number">1</span>, <span class="string">&#x27;asdf&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h5 id="快照隔离SI：可重复读"><a href="#快照隔离SI：可重复读" class="headerlink" title="快照隔离SI：可重复读"></a>快照隔离SI：可重复读</h5><table>
<thead>
<tr>
<th align="center">连接1</th>
<th align="center">连接2</th>
</tr>
</thead>
<tbody><tr>
<td align="center">begin tran<br/>update isolation_1<br/>set des &#x3D;’UPDATED’<br/>where id1&#x3D;1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">begin tran<br/>select * from isolation_1<br/>– 读到的结果是 asdf（事务起点的状态）</td>
</tr>
<tr>
<td align="center">commit tran</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">select * from isolation_1<br/>commit tran<br />– 读到的结果是 asdf（事务起点的状态）</td>
</tr>
</tbody></table>
<h5 id="快照隔离SI：回滚"><a href="#快照隔离SI：回滚" class="headerlink" title="快照隔离SI：回滚"></a>快照隔离SI：回滚</h5><ul>
<li>发生冲突的时候，先提交者胜</li>
<li>右边事务会被回滚</li>
</ul>
<table>
<thead>
<tr>
<th align="center">连接1</th>
<th align="center">连接2</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center">SET TRANSACTION ISOLATION<br/>LEVEL SNAPSHOT</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">begin tran<br/>select id1 from isolation_1</td>
</tr>
<tr>
<td align="center">begin tran<br/>update isolation_1<br/>set id1 &#x3D; id1+10</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">update isolation_1<br/>set id1 &#x3D; id1+20</td>
</tr>
<tr>
<td align="center">commit tran</td>
<td align="center"></td>
</tr>
</tbody></table>
<h4 id="SQL-Server：快照隔离-RCSI"><a href="#SQL-Server：快照隔离-RCSI" class="headerlink" title="SQL Server：快照隔离 RCSI"></a>SQL Server：快照隔离 RCSI</h4><ul>
<li>语句级别的快照隔离</li>
<li>当前语句操作的数据库是当前语句对应的数据库的状态<ul>
<li>而不是事务开始时的版本</li>
</ul>
</li>
</ul>
<h5 id="快照隔离-RCSI：不可重复读"><a href="#快照隔离-RCSI：不可重复读" class="headerlink" title="快照隔离 RCSI：不可重复读"></a>快照隔离 RCSI：不可重复读</h5><table>
<thead>
<tr>
<th align="center">连接1</th>
<th align="center">连接2</th>
</tr>
</thead>
<tbody><tr>
<td align="center">begin tran<br/>update isolation_1<br/>set des &#x3D;’UPDATED’<br/>where id1&#x3D;1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">begin tran<br/>select * from isolation_1<br/>– 读到的结果是 asdf（语句开始的状态）</td>
</tr>
<tr>
<td align="center">commit tran</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">select * from isolation_1<br/>commit tran<br />– 读到的结果是 UPDATED（语句开始的状态）</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/05/22/DB/CLJ/06-1/" data-id="cl9lj74aw00fo64tz6dle8lr8" data-title="数据库概论.陈立军.06.事务(2) 事务隔离性" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DB/" rel="tag">DB</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/05/22/CG/YLQ-GAMES202/11/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          GAMES202.闫令琪.11.基于物理的材质与非真实感渲染
        
      </div>
    </a>
  
  
    <a href="/2021/05/21/DB/CLJ/06/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">数据库概论.陈立军.06.事务</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/0/">0</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Algebra/">Algebra</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C-Kits/">C++.Kits</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG/">CG</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-Algorithm/">CG.Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-GAMES101/">CG.GAMES101</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-GAMES102/">CG.GAMES102</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-GAMES103/">CG.GAMES103</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-GAMES104/">CG.GAMES104</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-GAMES202/">CG.GAMES202</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-GAMES203/">CG.GAMES203</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-Kits/">CG.Kits</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-LS/">CG.LS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-PBRT/">CG.PBRT</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-Paper/">CG.Paper</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CV/">CV</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Code/">Code</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DB-CLJ/">DB.CLJ</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DB-MySQL/">DB.MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DB-SQLServer/">DB.SQLServer</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DSA/">DSA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kits/">Kits</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Math/">Math</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS-CXQ/">OS.CXQ</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS-OSTEP/">OS.OSTEP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS-xv6-labs/">OS.xv6-labs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS-xv6-source-code/">OS.xv6-source-code</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TODO/">TODO</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/book-directory/">book.directory</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/computation-pyr/">computation.pyr</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/csharp-kits/">csharp.kits</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/csharp-tds/">csharp.tds</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/images/">images</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/installation/">installation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mitsuba/">mitsuba</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nothing/">nothing</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/software-Maya/">software.Maya</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/software-ps/">software.ps</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/software-vscode/">software.vscode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/win/">win</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algebra/" rel="tag">Algebra</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BFS/" rel="tag">BFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BST/" rel="tag">BST</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BVH/" rel="tag">BVH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CG/" rel="tag">CG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CG-Algorithm/" rel="tag">CG-Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CV/" rel="tag">CV</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Code/" rel="tag">Code</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DB/" rel="tag">DB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DFS/" rel="tag">DFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DP/" rel="tag">DP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DSA/" rel="tag">DSA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dijkstra/" rel="tag">Dijkstra</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EG/" rel="tag">EG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Floyd/" rel="tag">Floyd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GI/" rel="tag">GI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Glints/" rel="tag">Glints</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HDR/" rel="tag">HDR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HQX/" rel="tag">HQX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Heap/" rel="tag">Heap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kits/" rel="tag">Kits</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LCA/" rel="tag">LCA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LLG/" rel="tag">LLG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MCMC/" rel="tag">MCMC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MIS/" rel="tag">MIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MLT/" rel="tag">MLT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maya/" rel="tag">Maya</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NEE/" rel="tag">NEE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OS/" rel="tag">OS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PBRT/" rel="tag">PBRT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Paper/" rel="tag">Paper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Radiometry/" rel="tag">Radiometry</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RayTracing/" rel="tag">RayTracing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SAH/" rel="tag">SAH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SDF/" rel="tag">SDF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SGJ/" rel="tag">SGJ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQLServer/" rel="tag">SQLServer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STL/" rel="tag">STL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shadow/" rel="tag">Shadow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WHM/" rel="tag">WHM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WX/" rel="tag">WX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/YLQ/" rel="tag">YLQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/book/" rel="tag">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/computation/" rel="tag">computation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/csharp/" rel="tag">csharp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/images/" rel="tag">images</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/installation/" rel="tag">installation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/" rel="tag">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mitsuba/" rel="tag">mitsuba</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mobaxterm/" rel="tag">mobaxterm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nothing/" rel="tag">nothing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/obs/" rel="tag">obs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/occlusion/" rel="tag">occlusion</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ps/" rel="tag">ps</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/software/" rel="tag">software</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/test/" rel="tag">test</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tree/" rel="tag">tree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/" rel="tag">vscode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/win/" rel="tag">win</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xv6/" rel="tag">xv6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8C%E5%88%86/" rel="tag">二分</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%83%E5%AE%87%E5%AE%99/" rel="tag">元宇宙</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%87%A0%E4%BD%95/" rel="tag">几何</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%AF%E8%A7%81%E6%80%A7/" rel="tag">可见性</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/" rel="tag">并查集</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F/" rel="tag">拓扑排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F/" rel="tag">排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%99%AE%E5%90%95%E5%85%8B%E5%9D%90%E6%A0%87/" rel="tag">普吕克坐标</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/" rel="tag">最小生成树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%80%E7%9F%AD%E8%B7%AF/" rel="tag">最短路</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/" rel="tag">线段树</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Algebra/" style="font-size: 10px;">Algebra</a> <a href="/tags/BFS/" style="font-size: 10px;">BFS</a> <a href="/tags/BST/" style="font-size: 10px;">BST</a> <a href="/tags/BVH/" style="font-size: 12.5px;">BVH</a> <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/CG/" style="font-size: 20px;">CG</a> <a href="/tags/CG-Algorithm/" style="font-size: 10px;">CG-Algorithm</a> <a href="/tags/CV/" style="font-size: 10.63px;">CV</a> <a href="/tags/Code/" style="font-size: 14.38px;">Code</a> <a href="/tags/DB/" style="font-size: 19.38px;">DB</a> <a href="/tags/DFS/" style="font-size: 12.5px;">DFS</a> <a href="/tags/DP/" style="font-size: 13.13px;">DP</a> <a href="/tags/DSA/" style="font-size: 11.25px;">DSA</a> <a href="/tags/Dijkstra/" style="font-size: 10px;">Dijkstra</a> <a href="/tags/EG/" style="font-size: 12.5px;">EG</a> <a href="/tags/Floyd/" style="font-size: 10.63px;">Floyd</a> <a href="/tags/GI/" style="font-size: 11.25px;">GI</a> <a href="/tags/Glints/" style="font-size: 10px;">Glints</a> <a href="/tags/HDR/" style="font-size: 10px;">HDR</a> <a href="/tags/HQX/" style="font-size: 10px;">HQX</a> <a href="/tags/Heap/" style="font-size: 10px;">Heap</a> <a href="/tags/Kits/" style="font-size: 13.75px;">Kits</a> <a href="/tags/LCA/" style="font-size: 10px;">LCA</a> <a href="/tags/LLG/" style="font-size: 12.5px;">LLG</a> <a href="/tags/MCMC/" style="font-size: 10.63px;">MCMC</a> <a href="/tags/MIS/" style="font-size: 10px;">MIS</a> <a href="/tags/MLT/" style="font-size: 10px;">MLT</a> <a href="/tags/Maya/" style="font-size: 10px;">Maya</a> <a href="/tags/MySQL/" style="font-size: 11.88px;">MySQL</a> <a href="/tags/NEE/" style="font-size: 10px;">NEE</a> <a href="/tags/OS/" style="font-size: 17.5px;">OS</a> <a href="/tags/PBRT/" style="font-size: 10px;">PBRT</a> <a href="/tags/Paper/" style="font-size: 15.63px;">Paper</a> <a href="/tags/Radiometry/" style="font-size: 10px;">Radiometry</a> <a href="/tags/RayTracing/" style="font-size: 10px;">RayTracing</a> <a href="/tags/SAH/" style="font-size: 10px;">SAH</a> <a href="/tags/SDF/" style="font-size: 10px;">SDF</a> <a href="/tags/SGJ/" style="font-size: 10.63px;">SGJ</a> <a href="/tags/SQL/" style="font-size: 13.13px;">SQL</a> <a href="/tags/SQLServer/" style="font-size: 10.63px;">SQLServer</a> <a href="/tags/STL/" style="font-size: 11.25px;">STL</a> <a href="/tags/Shadow/" style="font-size: 10px;">Shadow</a> <a href="/tags/WHM/" style="font-size: 16.88px;">WHM</a> <a href="/tags/WX/" style="font-size: 11.88px;">WX</a> <a href="/tags/YLQ/" style="font-size: 18.13px;">YLQ</a> <a href="/tags/book/" style="font-size: 10.63px;">book</a> <a href="/tags/computation/" style="font-size: 18.75px;">computation</a> <a href="/tags/csharp/" style="font-size: 16.25px;">csharp</a> <a href="/tags/images/" style="font-size: 10px;">images</a> <a href="/tags/installation/" style="font-size: 11.88px;">installation</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/linux/" style="font-size: 11.25px;">linux</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mitsuba/" style="font-size: 11.88px;">mitsuba</a> <a href="/tags/mobaxterm/" style="font-size: 10px;">mobaxterm</a> <a href="/tags/nothing/" style="font-size: 10.63px;">nothing</a> <a href="/tags/obs/" style="font-size: 10px;">obs</a> <a href="/tags/occlusion/" style="font-size: 15px;">occlusion</a> <a href="/tags/ps/" style="font-size: 10px;">ps</a> <a href="/tags/software/" style="font-size: 10px;">software</a> <a href="/tags/test/" style="font-size: 10px;">test</a> <a href="/tags/tree/" style="font-size: 11.25px;">tree</a> <a href="/tags/vscode/" style="font-size: 10.63px;">vscode</a> <a href="/tags/win/" style="font-size: 10.63px;">win</a> <a href="/tags/xv6/" style="font-size: 16.25px;">xv6</a> <a href="/tags/%E4%BA%8C%E5%88%86/" style="font-size: 10.63px;">二分</a> <a href="/tags/%E5%85%83%E5%AE%87%E5%AE%99/" style="font-size: 10.63px;">元宇宙</a> <a href="/tags/%E5%87%A0%E4%BD%95/" style="font-size: 10px;">几何</a> <a href="/tags/%E5%8F%AF%E8%A7%81%E6%80%A7/" style="font-size: 11.88px;">可见性</a> <a href="/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/" style="font-size: 10.63px;">并查集</a> <a href="/tags/%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F/" style="font-size: 10px;">拓扑排序</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size: 10px;">排序</a> <a href="/tags/%E6%99%AE%E5%90%95%E5%85%8B%E5%9D%90%E6%A0%87/" style="font-size: 10px;">普吕克坐标</a> <a href="/tags/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/" style="font-size: 10px;">最小生成树</a> <a href="/tags/%E6%9C%80%E7%9F%AD%E8%B7%AF/" style="font-size: 13.13px;">最短路</a> <a href="/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/" style="font-size: 10px;">线段树</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/10/23/CG/WHM-GAMES103/11/">GAMES103.王华民.11.Incompressible Fluid Dynamics and Eulerian Fluids</a>
          </li>
        
          <li>
            <a href="/2022/10/23/CG/Papers/2021/bvh-survey-3/">(论文)[2021] A Survey on Bounding Volume Hierarchies for Ray Tracing(4)</a>
          </li>
        
          <li>
            <a href="/2022/04/28/CG/Kits/MIS-NEE/">NEE、MIS(多重重要性采样)</a>
          </li>
        
          <li>
            <a href="/2022/04/18/CG/WHM-GAMES103/10/">GAMES103.王华民.10.Surface Waves</a>
          </li>
        
          <li>
            <a href="/2022/04/17/CG/WHM-GAMES103/09-1/">GAMES103.王华民.09.Collision Handling(1)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>