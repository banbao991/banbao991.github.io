<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>(论文)[1997] Metropolis Light Transport | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="MLT（MCMC 的应用）">
<meta property="og:type" content="article">
<meta property="og:title" content="(论文)[1997] Metropolis Light Transport">
<meta property="og:url" content="http://example.com/2021/07/08/CG/Papers/1997/MLT/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="MLT（MCMC 的应用）">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2021/07/08/CG/Papers/1997/MLT/MLT/image-20210711121721776.png">
<meta property="og:image" content="http://example.com/2021/07/08/CG/Papers/1997/MLT/MLT/image-20210711122845982.png">
<meta property="og:image" content="http://example.com/2021/07/08/CG/Papers/1997/MLT/MLT/image-20210711121721776.png">
<meta property="og:image" content="http://example.com/2021/07/08/CG/Papers/1997/MLT/MLT/image-20210711232730897.png">
<meta property="article:published_time" content="2021-07-08T13:43:30.000Z">
<meta property="article:modified_time" content="2022-01-30T07:54:43.838Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="CG">
<meta property="article:tag" content="Paper">
<meta property="article:tag" content="MLT">
<meta property="article:tag" content="MCMC">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/07/08/CG/Papers/1997/MLT/MLT/image-20210711121721776.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-CG/Papers/1997/MLT" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/08/CG/Papers/1997/MLT/" class="article-date">
  <time class="dt-published" datetime="2021-07-08T13:43:30.000Z" itemprop="datePublished">2021-07-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CG-Paper/">CG.Paper</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      (论文)[1997] Metropolis Light Transport
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>VEACH E., GUIBAS L. J.: Metropolis light transport. In Annual Conference Series (Proceedings of SIGGRAPH) (Aug. 1997), vol. 31, ACM Press, pp. 65–76. <a target="_blank" rel="noopener" href="https://dl.acm.org/doi/10.1145/258734.258775">doi:10&#x2F;bkjqj4</a>.</li>
</ul>
<p><span style="color:red;font-weight:bold">TODO 找时间得继续看看</span></p>
<h1 id="Metropolis-Light-Transport"><a href="#Metropolis-Light-Transport" class="headerlink" title="Metropolis Light Transport"></a>Metropolis Light Transport</h1><h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><ul>
<li>We present a new Monte Carlo method for solving the <strong>light transport</strong> problem, inspired by the <strong>Metropolis sampling method</strong> in computational physics.</li>
<li>MLT 是无偏的<ul>
<li>Our algorithm is <strong>unbiased</strong>, handles general geometric and scattering models, uses little storage, and can be orders of magnitude more efficient than previous unbiased approaches.</li>
</ul>
</li>
<li>优点<ul>
<li>在复杂场景中表现很好<ul>
<li>bright indirect light</li>
<li>small geometric holes</li>
<li>glossy surfaces.</li>
</ul>
</li>
<li>简单场景中和之前的方法相比也不错</li>
</ul>
</li>
<li>The key advantage of the Metropolis approach is that the <strong>path space is explored locally</strong>, by <strong>favoring mutations</strong> that make small changes to the current path<ul>
<li>First, the <strong>average cost per sample is small</strong> (typically only one or two rays).</li>
<li>Second, once an important path is found, <strong>the nearby paths are explored as well</strong>, thus amortizing the expense of finding such paths over many samples.</li>
<li>Third, <strong>the mutation set is easily extended</strong>. By constructing mutations that preserve certain properties of the path (e.g. which light source is used) while changing others, we can exploit various kinds of coherence in the scene. <strong>It is often possible to handle difficult lighting problems efficiently by designing a specialized mutation in this way.</strong></li>
</ul>
</li>
</ul>
<h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1 Introduction"></a>1 Introduction</h2><ul>
<li>current methods are optimized for a <strong>fairly narrow class</strong> of input scenes.</li>
<li>Monte Carlo methods<ul>
<li>generality and simplicity.</li>
<li>unbiased<ul>
<li>For these algorithms, <strong>any error in the solution</strong> is guaranteed to show up as <strong>random variations</strong> among the samples (e.g., as image noise).</li>
</ul>
</li>
</ul>
</li>
<li>有偏算法带来的问题<ul>
<li>Biased algorithms may produce results that are not noisy, but are nevertheless <strong>incorrect.</strong></li>
<li>This error is often noticeable visually, in the form of <strong>discontinuities</strong>, <strong>excessive blurring</strong>, or <strong>objectionable surface shading</strong>.</li>
</ul>
</li>
<li>Monte Carlo 算法的问题<ul>
<li>The problem is that for some environments, <strong>most paths do not contribute significantly to the image</strong>, e.g. because they <strong>strike surfaces with low reflectivity</strong>, or <strong>go through solid objects</strong>.</li>
<li>出问题的场景<ul>
<li>For example, imagine a brightly lit room next to a dark room containing the camera, with a door slightly ajar between them.<ul>
<li>两个房间，光源在一个房间中，相机在另一个房间中，两个房间之间有一扇半开的门</li>
</ul>
</li>
</ul>
</li>
<li>对如下现象都不太支持<ul>
<li>glossy surfaces, caustics, strong indirect lighting</li>
</ul>
</li>
</ul>
</li>
<li>Several techniques have been proposed to sample these difficult paths more efficiently.<ul>
<li><strong>bidirectional path tracing</strong> (BDPT)</li>
<li>Another idea is to <strong>build an approximate representation of the radiance in a scene</strong>, which is then used to <strong>modify the directional sampling</strong> of the basic path tracing algorithm.<ul>
<li>一些问题</li>
<li>inadequate directional resolution to handle concentrated indirect lighting</li>
<li>substantial(大量) space requirements.</li>
</ul>
</li>
</ul>
</li>
<li>MLT<ul>
<li>The algorithm samples paths according to the <strong>contribution</strong> they make to the ideal image, by means of a random walk through path space.</li>
</ul>
</li>
</ul>
<h2 id="2-Overview-of-the-MLT-algorithm"><a href="#2-Overview-of-the-MLT-algorithm" class="headerlink" title="2 Overview of the MLT algorithm"></a>2 Overview of the MLT algorithm</h2><img src="MLT/image-20210711121721776.png" style="zoom: 80%;" />

<ul>
<li>sample the paths <strong>from the light sources to the lens</strong></li>
<li>path $\bar{x}&#x3D;\mathrm{x}_0\mathrm{x}_1\cdots\mathrm{x}_k$<ul>
<li>$\mathrm{x}_0$ 是光源</li>
<li>长度 $k\ge1$</li>
</ul>
</li>
<li><strong>power (flux)</strong> that flows from the light sources to the image plane along a set of paths $D$.</li>
</ul>
<p>$$<br>\int_{D}f(\bar{x});d\mu(\mathrm{x})<br>$$</p>
<ul>
<li>$f$：<strong>image contribution function</strong></li>
<li>Our overall strategy is to <strong>sample paths with probability proportional</strong> to $f$, and r<strong>ecord the distribution of paths</strong> over the image plane</li>
<li>We generate a sequence of paths $\bar{X}_0,\bar{X}_1,\cdots,\bar{X}_N$, where each $\bar{X}<em>i$ is obtained by a <strong>random mutation</strong> to the path $\bar{X}</em>{i-1}$</li>
<li>The mutations can have almost any desired form<ul>
<li><strong>adding</strong>, <strong>deleting</strong>, or <strong>replacing</strong> a small number of vertices on the current path</li>
</ul>
</li>
<li><strong>each mutation has a chance of being rejected</strong>, depending on the relative contributions of the old and new paths.</li>
<li><strong>As each path is sampled, we update the current image</strong></li>
<li>算法如下</li>
</ul>
<img src="MLT/image-20210711122845982.png" style="zoom:80%;" />



<h2 id="3-The-Metropolis-sampling-algorithm"><a href="#3-The-Metropolis-sampling-algorithm" class="headerlink" title="3 The Metropolis sampling algorithm"></a>3 The Metropolis sampling algorithm</h2><ul>
<li><p>In 1953, Metropolis, Rosenbluth, Rosenbluth, Teller, and Teller introduced an algorithm for <strong>handling difficult sampling problems</strong> in computational physics</p>
</li>
<li><p>前提</p>
<ul>
<li>We are given a <strong>state space</strong> $\Omega$, and a <strong>non-negative function</strong> $f:\Omega\to \mathbb{R}^+$.</li>
<li>We are also given some <strong>initial state</strong> $\bar{X}_0\in\Omega$</li>
</ul>
</li>
<li><p>目标</p>
<ul>
<li>generate a random walk $\bar{X}_0,\bar{X}_1,\cdots,\bar{X}_N$ such that $\bar{X}_i$ is eventually distributed proportionally to $f$, no matter which state $\bar{X}_0$ we start with.</li>
</ul>
</li>
<li><p><strong>the Metropolis algorithm does not require that $f$ integrate to one</strong>.</p>
</li>
<li><p>Each sample $\bar{X}<em>i$ is obtained by making a <strong>random change</strong> to $\bar{X}</em>{i−1}$</p>
<ul>
<li>in our case, these are the <strong>path mutations</strong></li>
</ul>
</li>
<li><p>马尔科夫链</p>
<ul>
<li>This type of random walk, where $\bar{X}<em>i$ depends only on $X</em>{i−1}$, is called a <strong>Markov chain</strong>.</li>
</ul>
</li>
<li><p>We let $K(\bar{y}|\bar{x})$ denote the probability density of going to state $\bar{y}$, given that we are currently in state $\bar{x}$.</p>
<ul>
<li><strong>transition function</strong></li>
<li>satisfies the condition</li>
</ul>
</li>
</ul>
<p>$$<br>\int_{\Omega}K(\bar{y}|\bar{x});d\mu(\bar{y})&#x3D;1,\forall\bar{x}\in\Omega<br>$$</p>
<h3 id="The-stationary-distribution"><a href="#The-stationary-distribution" class="headerlink" title="The stationary distribution"></a>The stationary distribution</h3><ul>
<li>平稳分布（状态不变）</li>
<li>Each $\bar{X}<em>i$ is a random variable with some distribution $p_i$, which is determined from $p</em>{i−1}$ by the equation (1) With mild conditions on $K$</li>
</ul>
<p>$$<br>p_{i}(\bar{x})&#x3D;\int_{G}K(\bar{x}|\bar{y});p_{i}(\bar{y});d\mu(\bar{y})\qquad(1)<br>$$</p>
<ul>
<li>the $p_i$ will converge to a unique distribution $p$, called the <strong>stationary distribution</strong></li>
<li><strong>Note that p does not depend on the initial state $\bar{X}_0$</strong></li>
</ul>
<h3 id="Detailed-balance"><a href="#Detailed-balance" class="headerlink" title="Detailed balance"></a>Detailed balance</h3><ul>
<li>细致平衡</li>
<li>在实际的物理系统中，$K$ 是由物理约束决定的，给定初始状态便会变化到平稳分布</li>
<li><strong>The Metropolis algorithm works in the opposite direction.</strong><ul>
<li>The idea is to <strong>invent or construct a transition function $K$</strong> whose resulting stationary distribution will be proportional to the given $f$, and which will converge to $f$ as quickly as possible.</li>
<li>找到转移函数 $K$ ，希望他能够快速收敛到 $f$</li>
</ul>
</li>
<li>The technique is simple, and has an intuitive physical interpretation called <strong>detailed balance</strong>.</li>
<li>Given $\bar{X}_{i-1}$, we obtain $\bar{X}_i$ as follows.</li>
<li>First, we choose a tentative（试探性的） sample $X_i’$</li>
<li>This is represented by the <strong>tentative transition function</strong> $T$</li>
<li>where $T(\bar{y}|\bar{x})$ gives the probability density that $X_i’&#x3D;\bar{y}$ given that $X_i’&#x3D;\bar{x}$</li>
<li>The tentative sample is then either accepted or rejected, according to an acceptance probability  $a(\bar{y}|\bar{x})$  which will be defined below</li>
</ul>
<p>$$<br>X_i&#x3D;<br>\begin{cases}<br>X_i’    \qquad \mathrm{with;probability;a(\overline{X}<em>i’|\overline{X}</em>{i-1}})\<br>X_{i&#x3D;1} \quad \mathrm{otherwise}<br>\end{cases}<br>$$</p>
<ul>
<li>To see how to set $a(\bar{y}|\bar{x})$, <strong>suppose that we have already reached equilibrium</strong>, i.e. $p_{i−1}$ is proportional to $f$.</li>
<li>From $\bar{x}$ to $\bar{y}$, the transition density is proportional to $f(\bar{x});T(\bar{y}|\bar{x});a(\bar{y}|\bar{x})$, and a similar statement holds for the transition density from $\bar{y}$ to $\bar{x}$.</li>
<li><span id="eq3">细致平衡条件</span></li>
</ul>
<p>$$<br>f(\bar{x});T(\bar{y}|\bar{x});a(\bar{y}|\bar{x})&#x3D;f(\bar{y});T(\bar{x}|\bar{y});a(\bar{x}|\bar{y}),\qquad (3)<br>$$</p>
<ul>
<li><span id="eq4">细致平衡条件是平稳分布的充分条件</span></li>
</ul>
<p>$$<br>\begin{aligned}<br>p_{i}(\bar{x})&#x3D;&amp;\Big[1-\int_{\Omega}f(\bar{x});T(\bar{y}|\bar{x});a(\bar{y}|\bar{x});d\mu(\bar{y})\Big]p_{i-1}(\bar{x})\qquad(4)\<br>&amp;+\int_{\Omega}f(\bar{x});p_{i-1}(\bar{y})T(\bar{x}|\bar{y});a(\bar{x}|\bar{y});d\mu(\bar{y})\<br>&amp;&#x3D;p_{i-1}(\bar{x})\<br>\end{aligned}<br>$$</p>
<h3 id="The-acceptance-probability"><a href="#The-acceptance-probability" class="headerlink" title="The acceptance probability"></a>The acceptance probability</h3><ul>
<li><p>接受概率</p>
</li>
<li><p>Recall that $f$ is given, and $T$ was chosen arbitrarily. Thus, equation <a href="#eq3">(3)</a> is a condition on the ratio $a(\bar{y}|\bar{x})&#x2F;a(\bar{x}|\bar{y})$.</p>
</li>
<li><p>In order to reach equilibrium as quickly as possible, the best strategy is to make $a(\bar{x}|\bar{y})$ and $a(\bar{y}|\bar{x})$ <strong>as large as possible</strong></p>
</li>
</ul>
<p>$$<br>a(\bar{y}|\bar{x})&#x3D;\min\Big{1,\dfrac{f(\bar{y})T(\bar{x}|\bar{y})}{f(\bar{x})T(\bar{y}|\bar{x})}\Big}<br>$$</p>
<ul>
<li>According to this rule, transitions <strong>in one direction are always accepted</strong>, while <strong>in the other direction they are sometimes</strong><br>  <strong>rejected</strong>, such that the expected number of moves each way is the same.</li>
</ul>
<h3 id="Comparison-with-genetic-algorithms"><a href="#Comparison-with-genetic-algorithms" class="headerlink" title="Comparison with genetic algorithms"></a>Comparison with genetic algorithms</h3><ul>
<li>different purposes<ul>
<li>genetic algorithms solve optimization problems</li>
<li>while the Metropolis method solves sampling problems</li>
</ul>
</li>
<li>Genetic algorithms work with <strong>a population of individuals</strong>, while Metropolis <strong>stores only a single current state</strong>.</li>
<li>Finally, genetic algorithms have much more freedom in choosing the allowable mutations, since they do not need to compute the conditional probability of their actions</li>
</ul>
<h2 id="4-The-path-integral-formulation-of-light-transport"><a href="#4-The-path-integral-formulation-of-light-transport" class="headerlink" title="4 The path integral formulation of light transport"></a>4 The path integral formulation of light transport</h2><ul>
<li>Often the light transport problem is written as an integral equation, where we must solve for the equilibrium radiance function L.</li>
<li>However, it can also be written as a <strong>pure integration problem</strong>, <strong>over the domain of all transport paths</strong>.<ul>
<li><strong>The MLT algorithm is based on this formulation.</strong></li>
</ul>
</li>
</ul>
<h3 id="The-light-transport-equation"><a href="#The-light-transport-equation" class="headerlink" title="The light transport equation"></a>The light transport equation</h3><ul>
<li>We assume a geometric optics model where light is emitted, scattered, and absorbed only <strong>at surfaces</strong>, travels in straight lines between surfaces, and is perfectly incoherent.</li>
<li><strong>light transport equation</strong><ul>
<li>$\mathcal{M}$ is the union of all scene surfaces</li>
<li>$A$ is the area measure on $\mathcal{M}$</li>
<li>The function $G$ represents the throughput of a differential beam between $dA(\mathrm{x})$ and $dA(\mathrm{x’})$</li>
</ul>
</li>
</ul>
<p>$$<br>L(\mathrm{x’}\to\mathrm{x’’})&#x3D;L_e(\mathrm{x’}\to\mathrm{x’’})+\int_{\mathcal{M}}L(\mathrm{x}\to\mathrm{x’})f_s(\mathrm{x}\to\mathrm{x’}\to\mathrm{x’’}){\color{red}G(\mathrm{x}\leftrightarrow\mathrm{x’})};dA(\mathrm{x})<br>$$</p>
<ul>
<li>$G$ 如下<ul>
<li>where $\cos\theta_o$ and $\cos\theta_i’$ represent the angles between the segment $\mathrm{x}\leftrightarrow\mathrm{x’}$ and the surface normals at $\mathrm{x}$ and $\mathrm{x_0}$ respectively</li>
<li>$V$ 为可见性</li>
</ul>
</li>
</ul>
<p>$$<br>G(\mathrm{x}\leftrightarrow\mathrm{x’})&#x3D;V(\mathrm{x}\leftrightarrow\mathrm{x’})\dfrac{|\cos\theta_o\cos\theta_i’|}{\Vert\mathrm{x}-\mathrm{x’}\Vert^2}<br>$$</p>
<h3 id="The-measurement-equation"><a href="#The-measurement-equation" class="headerlink" title="The measurement equation"></a>The measurement equation</h3><ul>
<li>We consider only algorithms that compute an image directly, so that the measurements consist of many pixel values $m_1,\cdots,m_M$, where <strong>M is the number of pixels in the image</strong>.</li>
<li>Each measurement has the form</li>
</ul>
<p>$$<br>m_j&#x3D;\int_{\mathcal{M}\times\mathcal{M}}W_e^{(j)}(\mathrm{x}\to\mathrm{x}’)L(\mathrm{x}\to\mathrm{x}’)G(\mathrm{x}\leftrightarrow\mathrm{x}’);dA(\mathrm{x});dA(\mathrm{x}’)<br>$$</p>
<ul>
<li>where $W_e^{(j)}(\mathrm{x}\to\mathrm{x’})$ is a weight that indicates how much the light arriving at $\mathrm{x’}$ from the direction of $\mathrm{x}$ contributes to the value of the measurement<ul>
<li>For real sensors, $W_e^{(j)}(\mathrm{x}\to\mathrm{x’})$ is called the <strong>flux responsivity</strong> (with units of $[W^{-1}]$), but in graphics it is more often called an <strong>importance function</strong></li>
</ul>
</li>
</ul>
<h3 id="The-path-integral-formulation"><a href="#The-path-integral-formulation" class="headerlink" title="The path integral formulation"></a>The path integral formulation</h3><ul>
<li>By recursively expanding the transport equation (6), we can write measurements in the form</li>
</ul>
<p>$$<br>\begin{aligned}<br>m_j&#x3D;&amp;\int_{\mathcal{M}^2}L(\mathrm{x}_0\to\mathrm{x}_1)G(\mathrm{x}_0\leftrightarrow\mathrm{x}_1)W_e^{(j)}(\mathrm{x}_0\to\mathrm{x}_1);dA(\mathrm{x}_0);dA(\mathrm{x}<em>1)\<br>&amp;+\int</em>{\mathcal{M}^3}L(\mathrm{x}_0\to\mathrm{x}_1)G(\mathrm{x}_0\leftrightarrow\mathrm{x}_1)f_s(\mathrm{x}_0\leftrightarrow\mathrm{x}_1\leftrightarrow\mathrm{x}_2)G(\mathrm{x}_1\leftrightarrow\mathrm{x}_2)W_e^{(j)}(\mathrm{x}_1\to\mathrm{x}_2);dA(\mathrm{x}_0);dA(\mathrm{x}_1);dA(\mathrm{x}_2)\<br>&amp;\cdots\<br>\end{aligned}<br>$$</p>
<ul>
<li>The goal is to write this expression in the form, so that we can handle it as a pure integration problem.</li>
</ul>
<p>$$<br>m_j&#x3D;\int_{\Omega}f_j(\bar{x});d\mu(\bar{x})<br>$$</p>
<ul>
<li>let $\Omega_k$ be the set of all paths of the form $\bar{x}&#x3D;\mathrm{x}_0\mathrm{x}_1\cdots\mathrm{x}_k$, where $k\ge1$ and $x_i\in\mathcal{M}$ for each $i$.</li>
</ul>
<p>$$<br>d\mu_k(\mathrm{x}_0\cdots\mathrm{x}_k)&#x3D;dA(\mathrm{x}_0)\cdots;dA(\mathrm{x}_k)<br>$$</p>
<ul>
<li>we let $\Omega$ be the union of all the $\Omega_k$ and define a measure $\mu$ on $\Omega_k$ by<ul>
<li>感觉可以把 $D$ 理解为路径全空间</li>
</ul>
</li>
</ul>
<p>$$<br>\mu(D)&#x3D;\sum_{k&#x3D;1}^{\infty}\mu_k(D;\cap\Omega_k)<br>$$</p>
<ul>
<li>We call $f_j$ the <strong>measurement contribution function</strong></li>
<li>例子</li>
</ul>
<p>$$<br>f_j(\mathrm{x}_0\mathrm{x}_1)&#x3D;L_e(\mathrm{x}_0\to\mathrm{x}_1)G(\mathrm{x}_0\leftrightarrow\mathrm{x}_1)W_e^{(j)}(\mathrm{x}_0\to\mathrm{x}_1)<br>$$</p>
<img src="MLT/image-20210711121721776.png" style="zoom: 80%;" />

<ul>
<li>上面转化的目的<ul>
<li>The most significant aspect is that we <strong>have removed the sum over different path lengths</strong>, and <strong>replaced it with a single integral over an abstract measure space of paths</strong>.</li>
</ul>
</li>
</ul>
<h2 id="5-Metropolis-light-transport"><a href="#5-Metropolis-light-transport" class="headerlink" title="5 Metropolis light transport"></a>5 Metropolis light transport</h2><ul>
<li>一些准备工作<ul>
<li>First, we must formulate the light transport problem so that it fits the Metropolis framework.</li>
<li>Second, we must show how to avoid <strong>start-up bias</strong>, a problem which affects many Metropolis applications.</li>
<li>Most importantly, we must design a suitable set of <strong>mutations</strong> on paths, such that the Metropolis method will work efficiently.</li>
</ul>
</li>
</ul>
<h3 id="5-1-Reduction-to-the-Metropolis-framework"><a href="#5-1-Reduction-to-the-Metropolis-framework" class="headerlink" title="5.1 Reduction to the Metropolis framework"></a>5.1 Reduction to the Metropolis framework</h3><ul>
<li>Observe that each integrand $f_j$ has the form $f_j(\bar{x})&#x3D;w_j(\bar{x})f(\bar{x})$<ul>
<li>$w_j$ represents the filter function for pixel $j$</li>
<li>$f$ represents all the other factors of $f_j$ (which are the same for all pixels).</li>
</ul>
</li>
<li>In physical terms, $\int_Df(\bar{x});d\mu(\bar{x})$ represents the <strong>radiant powe</strong>r received by the image area of the image plane along <strong>a set $D$ of paths</strong>.</li>
<li>Note that $w_j$ depends only on the last edge $\mathrm{x}_{k-1}\mathrm{x}_k$ of the path, which we call the <strong>lens edge</strong>.</li>
<li>An image can now be computed by sampling $N$ paths $\mathrm{X}_i$ according to some distribution $p$, and using the identity</li>
</ul>
<p>$$<br>m_j&#x3D;E\Big[\dfrac{1}{N}\sum_{i&#x3D;1}^{N}\dfrac{w_j(\bar{X}_i)f(\bar{X}_i)}{p(\bar{X}_i)}\Big]<br>$$</p>
<ul>
<li><span style="color:red">If we could</span> let $p&#x3D;\dfrac{1}{b}f$ (where $b$ is the normalization constant $\int_\Omega f(\bar{x});d\mu(\bar{x})$, the estimate for each pixel would be</li>
</ul>
<p>$$<br>m_j&#x3D;E\Big[\dfrac{1}{N}\sum_{i&#x3D;1}^{N}b;w_j(\bar{X}_i)\Big]<br>$$</p>
<ul>
<li><strong>This equation can be evaluated efficiently for all pixels at  once, since each path contributes to only a few pixel values.</strong></li>
<li>问题：This idea requires the evaluation of $b$, and the ability to sample from a distribution proportional to $f$.<ul>
<li><strong>Both of these are hard problems.</strong></li>
<li>For the <strong>second</strong> part, the Metropolis algorithm will help<ul>
<li>however, the samples $\bar{X}_i$ will have the desired distribution only in the limit as $i\to\infty$</li>
<li>Metropolis 应用中丢弃前 k 个 sample，直到结果大概收敛到 equilibrium distribution<ul>
<li>k 的预测也是个问题</li>
<li><strong>start-up bias</strong>：如果选取的 k 太小，结果将很大程度上受到 $\bar{X}_0$ 的影响</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Eliminating-start-up-bias"><a href="#Eliminating-start-up-bias" class="headerlink" title="Eliminating start-up bias"></a>Eliminating start-up bias</h4><ul>
<li>The idea is to start the walk in a random initial state $\bar{X}_0$, <strong>which is sampled from some convenient path distribution $p_0$</strong><ul>
<li>we use bidirectional path tracing for this purpose</li>
<li>初始路径通过其他采样方式采出</li>
</ul>
</li>
<li>To compensate for the fact that $p_0$ is <strong>not the desired distribution</strong> $\dfrac{1}{b}f$, the sample $\bar{X}_0$ is assigned a weight: $W_0&#x3D;\dfrac{f(\bar{X}_0)}{p_0(\bar{X}_0)}$</li>
<li>Thus <strong>after one sample</strong>, the estimate for pixel $j$ is $W_0w_j(\bar{X}_0)$<ul>
<li>N&#x3D;1 代入即可</li>
<li>$\bar{X}_0$ 已知的条件下，这些都是可以计算的</li>
</ul>
</li>
<li>接下来可以根据 Metropolis algorithm 进行采样得到 $\bar{X}_1,\cdots,\bar{X}_N$<ul>
<li>mutating $\bar{X}_0$</li>
<li>using $f$ as the target density</li>
</ul>
</li>
<li>Each of the $\bar{X}_i$ has a different distribution $p_i$, which only approaches $\dfrac{1}{b}f$ as $i\to\infty$</li>
<li>To <strong>avoid bias</strong>, however, it is sufficient to assign these samples the same weight $W_i&#x3D;W_0$ as the original sample, where the following estimate is used for pixel $j$</li>
</ul>
<p>$$<br>m_j&#x3D;E\Big[\dfrac{1}{N}\sum_{i&#x3D;1}^{N}w_j(\bar{X}_i){W_i}\Big]<br>$$</p>
<ul>
<li><strong>unbiased</strong><ul>
<li>如果 $p_0&#x3D;\dfrac{1}{b}f,W_0&#x3D;b$，那么结果一定是 equilibrium.</li>
<li>对于一般的 $p_0$<ul>
<li>$W_0&#x3D;\dfrac{f}{p_0}$ leads to exactly the same distribution of weighta mong the starting paths, and so we should expect that these <strong>initial conditions are unbiased as well</strong>.</li>
</ul>
</li>
</ul>
</li>
<li>unbiased 证明如下</li>
<li>首先证明如下等式在每一步中都成立</li>
</ul>
<p>$$<br>\int_{\mathbb{R}}w;q_i(w,\bar{x});dw&#x3D;f(\bar{x})<br>$$</p>
<ul>
<li>where $q_i$ is the joint probability distribution of the i-th weighted sample $(W_i,\bar{X}i)$</li>
<li>$q_0$ 是成立的<ul>
<li>$q_0(w,\bar{x})&#x3D;\delta(w-\dfrac{f(\bar{x})}{p_0(\bar{x})})p_0(\bar{x})$<ul>
<li>$\delta$ denotes the Dirac delta distribution</li>
</ul>
</li>
<li>$W_0&#x3D;\dfrac{f(\bar{X}_0)}{p_0(\bar{X}_0)}$</li>
</ul>
</li>
<li>由上面的等式 <a href="#eq4">(4)</a><ul>
<li>Next, observe that (4) is still true with $p_j$ replaced by $q_i(w,\bar{x})$ (since the mutations set $W_i&#x3D;W_{i−1}$).</li>
<li>$\int_{\mathbb{R}}w;q_i(w,\bar{x});dw&#x3D;\int_{\mathbb{R}}w;q_{i-1}(w,\bar{x});dw$</li>
</ul>
</li>
</ul>
<p>$$<br>\begin{aligned}<br>E\Big[w_j(\bar{X}<em>i){W_i}\Big]&amp;&#x3D;\int</em>{\Omega}\int_{\mathbb{R}}w;w_j(\bar{x});q_i(w,\bar{x});dw;d\mu(\bar{x})\<br>&amp;&#x3D;\int_{\Omega};w_j(\bar{x});f(\bar{x});d\mu(\bar{x})\<br>&amp;&#x3D;m_j\<br>\end{aligned}<br>$$</p>
<ul>
<li>期望计算：$E(XY)&#x3D;\iint xyf(x,y)dxdy$</li>
</ul>
<h4 id="Initialization"><a href="#Initialization" class="headerlink" title="Initialization"></a>Initialization</h4><ul>
<li>In practice, <strong>initializing the MLT algorithm with a single sample does not work well</strong></li>
<li>If we generate only one path $\bar{X}_0$ (e.g. using bidirectional path tracing), <strong>it is quite likely that $W_0&#x3D;0$</strong> (e.g. the path goes through a wall).<ul>
<li><strong>结果为全黑</strong></li>
</ul>
</li>
<li><strong>The strategy we have implemented is to sample a moderately large number of paths $\bar{X}_0^{(1)},\cdots,\bar{X}_0^{(n)}$, with corresponding weights $W_0^{(1)},\cdots,W_0^{(n)}$</strong></li>
<li>We then resample the $\bar{X}_0^{(i)}$ to obtain a much smaller number $n’$ of equally-weighted paths<ul>
<li>chosen with equal spacing in the cumulative weight distribution of the $\bar{X}_0^{(i)}$</li>
<li>These are used as <strong>independent seeds</strong> for the <strong>Metropolis phase</strong> of the algorithm</li>
</ul>
</li>
<li>The value of n is determined indirectly, by generating a fixed number of eye and light subpaths (e.g. 10000 pairs), and considering all the ways to link the vertices of each pair.<ul>
<li>Note that it is not necessary to save all of these paths for the resampling step</li>
<li><strong>they can be regenerated by restarting the random number generator with the same seed.</strong></li>
</ul>
</li>
<li>It is often reasonable to choose <strong>$n’&#x3D;1$</strong> (a single Metropolis seed).</li>
<li>实际测试中，初始化这一步的开销很小</li>
<li>two phase<ul>
<li>The initialization phase <strong>estimates the overall image brightness</strong></li>
<li>while the Metropolis phase determines <strong>the relative pixel intensities across the image</strong></li>
</ul>
</li>
</ul>
<h4 id="Convergence-tests"><a href="#Convergence-tests" class="headerlink" title="Convergence tests"></a>Convergence tests</h4><ul>
<li>Another reason to run several copies of the algorithm in parallel is that it facilitates（促进） convergence testing.<ul>
<li>We cannot apply the usual variance tests to samples generated by a single run of the Metropolis algorithm, since consecutive samples are <strong>highly correlated</strong>.</li>
</ul>
</li>
<li>To test for convergence, the Metropolis phase runs with $n’$ independent seed paths, whose contributions to the image are recorded separately (in the form of $n’$ separate images).</li>
</ul>
<h4 id="Spectral-sampling"><a href="#Spectral-sampling" class="headerlink" title="Spectral sampling"></a>Spectral sampling</h4><ul>
<li>Effectively, each color component $h$ is sampled with an estimator of the form $h&#x2F;p$, where $p$ is proportional to the luminance.</li>
</ul>
<h3 id="5-2-Designing-a-mutation-strategy"><a href="#5-2-Designing-a-mutation-strategy" class="headerlink" title="5.2 Designing a mutation strategy"></a>5.2 Designing a mutation strategy</h3><ul>
<li>MLT 的问题<ul>
<li><strong>consecutive samples are correlated</strong>, which leads to <strong>higher variance</strong> than we would get with independent samples.<ul>
<li>连续被拒绝导致存在未收敛的相同样本，影响 variance</li>
</ul>
</li>
<li>This can happen either because <strong>the proposed mutations to the path are very small</strong>, or because <strong>too many mutations are rejected.</strong></li>
</ul>
</li>
<li>This problem can be minimized by choosing a suitable set of path mutations.</li>
<li>一些 mutation 需要具备的特征</li>
<li><strong>High acceptance probability</strong><ul>
<li>acceptance probability is small $\to$ long path sequences $\to$  many samples at the same point on the image plane $\to$ appears as noise</li>
</ul>
</li>
<li><strong>Large changes to the path</strong><ul>
<li>small mutations 还是可能会导致 highly correlated</li>
</ul>
</li>
<li><strong>Ergodicity</strong><ul>
<li>If the allowable mutations are too restricted, it is possible for the random walk to get \stuck” in some subregion of the path space.<ul>
<li>比如下面的 figure 2</li>
</ul>
</li>
<li>To minimize correlation between the sample locations on the image plane, <strong>it is desirable for mutations to change the lens edge $\mathrm{x}<em>{k-1}\mathrm{x}</em>{k}$</strong></li>
</ul>
</li>
</ul>
<img src="MLT/image-20210711232730897.png" style="zoom:80%;" />

<ul>
<li><strong>Stratification</strong><ul>
<li>This is commonly known as the “balls in bins” effect:<ul>
<li>if we randomly throw n balls into n bins, we cannot expect one ball per bin.</li>
<li>Many bins may be empty, while the fullest bin is likely to contain $\Theta({n\log n})$ balls</li>
<li>In an image, this unevenness in the distribution produces noise.</li>
</ul>
</li>
<li>For some kinds of mutations, this effect is difficult to avoid.</li>
<li><strong>However, it is worthwhile to consider mutations for which some form of stratification is possible.</strong></li>
</ul>
</li>
<li><strong>Low cost</strong><ul>
<li>Generally, this is measured by <strong>the number of rays cast,</strong> since the other costs are relatively small</li>
</ul>
</li>
</ul>
<h3 id="5-3-Good-mutation-strategies"><a href="#5-3-Good-mutation-strategies" class="headerlink" title="5.3 Good mutation strategies"></a>5.3 Good mutation strategies</h3><h4 id="5-3-1-Bidirectional-mutations"><a href="#5-3-1-Bidirectional-mutations" class="headerlink" title="5.3.1 Bidirectional mutations"></a>5.3.1 Bidirectional mutations</h4><ul>
<li></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/08/CG/Papers/1997/MLT/" data-id="cl9lj74bt00lt64tz8krg7amm" data-title="(论文)[1997] Metropolis Light Transport" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CG/" rel="tag">CG</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MCMC/" rel="tag">MCMC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MLT/" rel="tag">MLT</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Paper/" rel="tag">Paper</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/07/17/DSA/SGJ/00/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          数据结构与算法.宋国杰.00.说明
        
      </div>
    </a>
  
  
    <a href="/2021/07/08/CG/Papers/2005/ERPT/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">(论文)[2005] Energy redistribution path tracing</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/0/">0</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Algebra/">Algebra</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C-Kits/">C++.Kits</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG/">CG</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-Algorithm/">CG.Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-GAMES101/">CG.GAMES101</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-GAMES102/">CG.GAMES102</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-GAMES103/">CG.GAMES103</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-GAMES104/">CG.GAMES104</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-GAMES202/">CG.GAMES202</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-GAMES203/">CG.GAMES203</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-Kits/">CG.Kits</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-LS/">CG.LS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-PBRT/">CG.PBRT</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG-Paper/">CG.Paper</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CV/">CV</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Code/">Code</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DB-CLJ/">DB.CLJ</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DB-MySQL/">DB.MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DB-SQLServer/">DB.SQLServer</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DSA/">DSA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kits/">Kits</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Math/">Math</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS-CXQ/">OS.CXQ</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS-OSTEP/">OS.OSTEP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS-xv6-labs/">OS.xv6-labs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS-xv6-source-code/">OS.xv6-source-code</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TODO/">TODO</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/book-directory/">book.directory</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/computation-pyr/">computation.pyr</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/csharp-kits/">csharp.kits</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/csharp-tds/">csharp.tds</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/images/">images</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/installation/">installation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mitsuba/">mitsuba</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nothing/">nothing</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/software-Maya/">software.Maya</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/software-ps/">software.ps</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/software-vscode/">software.vscode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/win/">win</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algebra/" rel="tag">Algebra</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BFS/" rel="tag">BFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BST/" rel="tag">BST</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BVH/" rel="tag">BVH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CG/" rel="tag">CG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CG-Algorithm/" rel="tag">CG-Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CV/" rel="tag">CV</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Code/" rel="tag">Code</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DB/" rel="tag">DB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DFS/" rel="tag">DFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DP/" rel="tag">DP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DSA/" rel="tag">DSA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dijkstra/" rel="tag">Dijkstra</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EG/" rel="tag">EG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Floyd/" rel="tag">Floyd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GI/" rel="tag">GI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Glints/" rel="tag">Glints</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HDR/" rel="tag">HDR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HQX/" rel="tag">HQX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Heap/" rel="tag">Heap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kits/" rel="tag">Kits</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LCA/" rel="tag">LCA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LLG/" rel="tag">LLG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MCMC/" rel="tag">MCMC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MIS/" rel="tag">MIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MLT/" rel="tag">MLT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maya/" rel="tag">Maya</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NEE/" rel="tag">NEE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OS/" rel="tag">OS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PBRT/" rel="tag">PBRT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Paper/" rel="tag">Paper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Radiometry/" rel="tag">Radiometry</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RayTracing/" rel="tag">RayTracing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SAH/" rel="tag">SAH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SDF/" rel="tag">SDF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SGJ/" rel="tag">SGJ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQLServer/" rel="tag">SQLServer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STL/" rel="tag">STL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shadow/" rel="tag">Shadow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WHM/" rel="tag">WHM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WX/" rel="tag">WX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/YLQ/" rel="tag">YLQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/book/" rel="tag">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/computation/" rel="tag">computation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/csharp/" rel="tag">csharp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/images/" rel="tag">images</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/installation/" rel="tag">installation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/" rel="tag">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mitsuba/" rel="tag">mitsuba</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mobaxterm/" rel="tag">mobaxterm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nothing/" rel="tag">nothing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/obs/" rel="tag">obs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/occlusion/" rel="tag">occlusion</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ps/" rel="tag">ps</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/software/" rel="tag">software</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/test/" rel="tag">test</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tree/" rel="tag">tree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/" rel="tag">vscode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/win/" rel="tag">win</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xv6/" rel="tag">xv6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8C%E5%88%86/" rel="tag">二分</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%83%E5%AE%87%E5%AE%99/" rel="tag">元宇宙</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%87%A0%E4%BD%95/" rel="tag">几何</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%AF%E8%A7%81%E6%80%A7/" rel="tag">可见性</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/" rel="tag">并查集</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F/" rel="tag">拓扑排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F/" rel="tag">排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%99%AE%E5%90%95%E5%85%8B%E5%9D%90%E6%A0%87/" rel="tag">普吕克坐标</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/" rel="tag">最小生成树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%80%E7%9F%AD%E8%B7%AF/" rel="tag">最短路</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/" rel="tag">线段树</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Algebra/" style="font-size: 10px;">Algebra</a> <a href="/tags/BFS/" style="font-size: 10px;">BFS</a> <a href="/tags/BST/" style="font-size: 10px;">BST</a> <a href="/tags/BVH/" style="font-size: 12.5px;">BVH</a> <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/CG/" style="font-size: 20px;">CG</a> <a href="/tags/CG-Algorithm/" style="font-size: 10px;">CG-Algorithm</a> <a href="/tags/CV/" style="font-size: 10.63px;">CV</a> <a href="/tags/Code/" style="font-size: 14.38px;">Code</a> <a href="/tags/DB/" style="font-size: 19.38px;">DB</a> <a href="/tags/DFS/" style="font-size: 12.5px;">DFS</a> <a href="/tags/DP/" style="font-size: 13.13px;">DP</a> <a href="/tags/DSA/" style="font-size: 11.25px;">DSA</a> <a href="/tags/Dijkstra/" style="font-size: 10px;">Dijkstra</a> <a href="/tags/EG/" style="font-size: 12.5px;">EG</a> <a href="/tags/Floyd/" style="font-size: 10.63px;">Floyd</a> <a href="/tags/GI/" style="font-size: 11.25px;">GI</a> <a href="/tags/Glints/" style="font-size: 10px;">Glints</a> <a href="/tags/HDR/" style="font-size: 10px;">HDR</a> <a href="/tags/HQX/" style="font-size: 10px;">HQX</a> <a href="/tags/Heap/" style="font-size: 10px;">Heap</a> <a href="/tags/Kits/" style="font-size: 13.75px;">Kits</a> <a href="/tags/LCA/" style="font-size: 10px;">LCA</a> <a href="/tags/LLG/" style="font-size: 12.5px;">LLG</a> <a href="/tags/MCMC/" style="font-size: 10.63px;">MCMC</a> <a href="/tags/MIS/" style="font-size: 10px;">MIS</a> <a href="/tags/MLT/" style="font-size: 10px;">MLT</a> <a href="/tags/Maya/" style="font-size: 10px;">Maya</a> <a href="/tags/MySQL/" style="font-size: 11.88px;">MySQL</a> <a href="/tags/NEE/" style="font-size: 10px;">NEE</a> <a href="/tags/OS/" style="font-size: 17.5px;">OS</a> <a href="/tags/PBRT/" style="font-size: 10px;">PBRT</a> <a href="/tags/Paper/" style="font-size: 15.63px;">Paper</a> <a href="/tags/Radiometry/" style="font-size: 10px;">Radiometry</a> <a href="/tags/RayTracing/" style="font-size: 10px;">RayTracing</a> <a href="/tags/SAH/" style="font-size: 10px;">SAH</a> <a href="/tags/SDF/" style="font-size: 10px;">SDF</a> <a href="/tags/SGJ/" style="font-size: 10.63px;">SGJ</a> <a href="/tags/SQL/" style="font-size: 13.13px;">SQL</a> <a href="/tags/SQLServer/" style="font-size: 10.63px;">SQLServer</a> <a href="/tags/STL/" style="font-size: 11.25px;">STL</a> <a href="/tags/Shadow/" style="font-size: 10px;">Shadow</a> <a href="/tags/WHM/" style="font-size: 16.88px;">WHM</a> <a href="/tags/WX/" style="font-size: 11.88px;">WX</a> <a href="/tags/YLQ/" style="font-size: 18.13px;">YLQ</a> <a href="/tags/book/" style="font-size: 10.63px;">book</a> <a href="/tags/computation/" style="font-size: 18.75px;">computation</a> <a href="/tags/csharp/" style="font-size: 16.25px;">csharp</a> <a href="/tags/images/" style="font-size: 10px;">images</a> <a href="/tags/installation/" style="font-size: 11.88px;">installation</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/linux/" style="font-size: 11.25px;">linux</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mitsuba/" style="font-size: 11.88px;">mitsuba</a> <a href="/tags/mobaxterm/" style="font-size: 10px;">mobaxterm</a> <a href="/tags/nothing/" style="font-size: 10.63px;">nothing</a> <a href="/tags/obs/" style="font-size: 10px;">obs</a> <a href="/tags/occlusion/" style="font-size: 15px;">occlusion</a> <a href="/tags/ps/" style="font-size: 10px;">ps</a> <a href="/tags/software/" style="font-size: 10px;">software</a> <a href="/tags/test/" style="font-size: 10px;">test</a> <a href="/tags/tree/" style="font-size: 11.25px;">tree</a> <a href="/tags/vscode/" style="font-size: 10.63px;">vscode</a> <a href="/tags/win/" style="font-size: 10.63px;">win</a> <a href="/tags/xv6/" style="font-size: 16.25px;">xv6</a> <a href="/tags/%E4%BA%8C%E5%88%86/" style="font-size: 10.63px;">二分</a> <a href="/tags/%E5%85%83%E5%AE%87%E5%AE%99/" style="font-size: 10.63px;">元宇宙</a> <a href="/tags/%E5%87%A0%E4%BD%95/" style="font-size: 10px;">几何</a> <a href="/tags/%E5%8F%AF%E8%A7%81%E6%80%A7/" style="font-size: 11.88px;">可见性</a> <a href="/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/" style="font-size: 10.63px;">并查集</a> <a href="/tags/%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F/" style="font-size: 10px;">拓扑排序</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size: 10px;">排序</a> <a href="/tags/%E6%99%AE%E5%90%95%E5%85%8B%E5%9D%90%E6%A0%87/" style="font-size: 10px;">普吕克坐标</a> <a href="/tags/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/" style="font-size: 10px;">最小生成树</a> <a href="/tags/%E6%9C%80%E7%9F%AD%E8%B7%AF/" style="font-size: 13.13px;">最短路</a> <a href="/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/" style="font-size: 10px;">线段树</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/10/23/CG/WHM-GAMES103/11/">GAMES103.王华民.11.Incompressible Fluid Dynamics and Eulerian Fluids</a>
          </li>
        
          <li>
            <a href="/2022/10/23/CG/Papers/2021/bvh-survey-3/">(论文)[2021] A Survey on Bounding Volume Hierarchies for Ray Tracing(4)</a>
          </li>
        
          <li>
            <a href="/2022/04/28/CG/Kits/MIS-NEE/">NEE、MIS(多重重要性采样)</a>
          </li>
        
          <li>
            <a href="/2022/04/18/CG/WHM-GAMES103/10/">GAMES103.王华民.10.Surface Waves</a>
          </li>
        
          <li>
            <a href="/2022/04/17/CG/WHM-GAMES103/09-1/">GAMES103.王华民.09.Collision Handling(1)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>