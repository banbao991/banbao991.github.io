<!-- DeepSeek 辅助完成 -->
<!DOCTYPE html>
<html>

<head>
    <title>Metropolis 模拟</title>
    <link href="main.css" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href="/images/favicon-32x32-next.jpg" type="image/x-icon">
</head>

<body>
    <div id="controls">
        <!-- 网格大小 -->
        <div class="control-group compact">
            <label for="gridSize">网格大小 (N)</label>
            <input type="number" id="gridSize" min="3" max="100" value="50">
        </div>

        <!-- 随机种子 -->
        <div class="control-group compact">
            <label for="seedInput">随机种子</label>
            <input type="number" id="seedInput" value="12345">
        </div>

        <!-- 最大轮次 -->
        <div class="control-group compact">
            <label for="maxSteps">最大轮次 (K)</label>
            <input type="number" id="maxSteps" value="1000" min="1">
        </div>

        <!-- 按钮组 -->
        <div class="button-group">
            <button id="newSeedBtn" data-tooltip="生成新的随机种子，以当前状态为初始状态继续模拟">新种子</button>
            <button id="resetButton" data-tooltip="重置到当前种子的初始状态">重置模拟</button>
            <button id="fullResetBtn" data-tooltip="生成新的随机种子，并且重新开始模拟">完全重置</button>
            <button id="pauseButton" data-tooltip="暂停/继续模拟">暂停模拟</button>
            <button id="stepButton" data-tooltip="逐步执行一次模拟">单步模拟</button>
            <button id="randomResetBtn" data-tooltip="随机重新分配水量保持总和不变，不随机则都是128">随机重置</button>
        </div>

        <!-- 状态显示 -->
        <div class="status-group">
            <div>迭代开始灰度都是128（除了随机重置），随机生成一个转移函数（只转移邻居和自身），接收率=1，真实模拟</div>
            <div>FPS: <span id="fpsLabel">0</span></div>
            <div>轮次: <span id="currentStep">0</span></div>
        </div>
    </div>
    <canvas id="canvas"></canvas>
    <script src="main.js"></script>
</body>

</html>