<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.jpg">
  <link rel="mask-icon" href="/images/apple-touch-icon-next.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.13.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="提出了一种针对 LDR 图片的新的误差评估标准，基于人眼感知的误差评估，考虑了观察距离、显示设备等观察因素，以及图片本身的性质（point、edge 检测）">
<meta property="og:type" content="article">
<meta property="og:title" content="(论文)[2020-HPG] ꟻLIP: A Difference Evaluator for Alternating Images">
<meta property="og:url" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/index.html">
<meta property="og:site_name" content="Banbao">
<meta property="og:description" content="提出了一种针对 LDR 图片的新的误差评估标准，基于人眼感知的误差评估，考虑了观察距离、显示设备等观察因素，以及图片本身的性质（point、edge 检测）">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/fig1-flip-pipeline.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/SMAPE.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/fig1-flip-pipeline.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/eq2-low-pass-filter.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/eq2-sup.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/tab1-filter-params.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/color3.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/color4.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/color1.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/color2.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/eq7-hunt-transform.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/eq7-hunt-transform2.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/eq8-HyAS-distance.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/compress-top.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/fig4.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/eq9.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/eq10-final-result.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/error-S-CIELAB.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/fig11-masking.png">
<meta property="og:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/fig3-user-study.png">
<meta property="article:published_time" content="2024-06-02T06:59:18.000Z">
<meta property="article:modified_time" content="2024-06-05T11:55:12.296Z">
<meta property="article:author" content="banbao(990)">
<meta property="article:tag" content="CG">
<meta property="article:tag" content="Paper">
<meta property="article:tag" content="HPG">
<meta property="article:tag" content="CGIT">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2024/06/02/CG/Papers/2020/FLIP/fig1-flip-pipeline.png">


<link rel="canonical" href="http://example.com/2024/06/02/CG/Papers/2020/FLIP/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2024/06/02/CG/Papers/2020/FLIP/","path":"2024/06/02/CG/Papers/2020/FLIP/","title":"(论文)[2020-HPG] ꟻLIP: A Difference Evaluator for Alternating Images"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>(论文)[2020-HPG] ꟻLIP: A Difference Evaluator for Alternating Images | Banbao</title>
  






  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Banbao</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-categories(2)"><a href="/kits/paper-lists/" rel="section"><i class="fa fa-print fa-fw"></i>Categories(2)</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-more-notes"><a href="https://github.com/banbao990/Use/" rel="noopener" target="_blank"><i class="fa fa-book fa-fw"></i>More notes</a></li><li class="menu-item menu-item-use"><a href="/use/" rel="section"><i class="fa fa-gamepad fa-fw"></i>Use</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#tldr"><span class="nav-text">TLDR</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%EA%9F%BBlip"><span class="nav-text">ꟻLIP</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#introduction"><span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#goals-and-limitations"><span class="nav-text">Goals and Limitations</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#previous-work"><span class="nav-text">Previous Work</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%B9%E6%AF%94%E7%AE%97%E6%B3%95"><span class="nav-text">对比算法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#algorithm"><span class="nav-text">Algorithm</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#color-pipeline"><span class="nav-text">Color Pipeline</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#spatial-filtering"><span class="nav-text">Spatial Filtering</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#step-1"><span class="nav-text">Step 1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#step-2"><span class="nav-text">Step 2</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#step-3"><span class="nav-text">Step 3</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#perceptually-uniform-color-space"><span class="nav-text">Perceptually Uniform Color
Space</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#color-metric"><span class="nav-text">Color Metric</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#feature-pipeline"><span class="nav-text">Feature Pipeline</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#feature-detection"><span class="nav-text">Feature Detection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#feature-metric"><span class="nav-text">Feature Metric</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#final-difference-map"><span class="nav-text">Final Difference Map</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#pooling"><span class="nav-text">Pooling</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#histogram"><span class="nav-text">histogram</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#evaluation"><span class="nav-text">Evaluation</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#analysis"><span class="nav-text">Analysis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#figure-9"><span class="nav-text">Figure 9</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#figure-10"><span class="nav-text">Figure 10</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#user-study"><span class="nav-text">User Study</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#discussion"><span class="nav-text">Discussion</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="banbao(990)"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">banbao(990)</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">329</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">45</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">103</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/banbao990" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;banbao990" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:2369896555@qq.com" title="E-Mail → mailto:2369896555@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/banbao990" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/06/02/CG/Papers/2020/FLIP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="banbao(990)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Banbao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="(论文)[2020-HPG] ꟻLIP: A Difference Evaluator for Alternating Images | Banbao">
      <meta itemprop="description" content="提出了一种针对 LDR 图片的新的误差评估标准，基于人眼感知的误差评估，考虑了观察距离、显示设备等观察因素，以及图片本身的性质（point、edge 检测）">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          (论文)[2020-HPG] ꟻLIP: A Difference Evaluator for Alternating Images
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-06-02 14:59:18" itemprop="dateCreated datePublished" datetime="2024-06-02T14:59:18+08:00">2024-06-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-06-05 19:55:12" itemprop="dateModified" datetime="2024-06-05T19:55:12+08:00">2024-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CG-Paper/" itemprop="url" rel="index"><span itemprop="name">CG.Paper</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

            <div class="post-description">提出了一种针对 LDR 图片的新的误差评估标准，基于人眼感知的误差评估，考虑了观察距离、显示设备等观察因素，以及图片本身的性质（point、edge 检测）</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="tldr">TLDR</h1>
<ul>
<li>输入为 LDR 的 RGB 图片，范围 <span class="math inline">\([0,1]\)</span></li>
<li>color pipeline
<ul>
<li>RGB -&gt; <span class="math inline">\(\text{Y}_{\text{y}}\text{c}_{\text{x}}\text{c}_{\text{z}}\)</span>
-&gt; 空域滤波（频率低通，高斯近似，逆傅里叶变换到空域加速）-&gt; RGB
-&gt; clamp -&gt; <span class="math inline">\(\text{L}^{\ast}\text{a}^{\ast}\text{b}^{\ast}\)</span>
-&gt; Hunt 调整 -&gt; 计算 metric（firefliers 的存在，需要压缩大的
error）</li>
</ul></li>
<li>feature pipeline
<ul>
<li>edge detection：2D 高斯一阶导数</li>
<li>point detection：2D 高斯二阶导数</li>
</ul></li>
</ul>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/fig1-flip-pipeline.png"></p>
<h1 id="ꟻlip">ꟻLIP</h1>
<ul>
<li>ꟻLIP: A Difference Evaluator for Alternating Images
<ul>
<li>为了方便，下文都直接用 FLIP</li>
</ul></li>
<li>Pontus Andersson, <strong>NVIDIA</strong></li>
<li><a target="_blank" rel="noopener" href="https://research.nvidia.com/publication/flip">项目主页</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/NVlabs/flip">代码</a></li>
</ul>
<h1 id="introduction">Introduction</h1>
<ul>
<li>Flipping/Alternating
两张图片，比把两张图片并排放着，更能够看出两张图片的异同</li>
<li>现在比较的方式：用户很难直观感受到区别
<ul>
<li>并排放图片AB</li>
<li>A切换空白再切换到B</li>
</ul></li>
<li>渲染研究者希望是：A直接切换到B（最直观）</li>
<li>FLIP：希望解决上面这个问题，同时考虑 error map（误差图）的影响
<ul>
<li>之前的方法大多是为了解释用户对刺激的反应，而不是考虑误差图</li>
</ul></li>
<li>对于颜色、边界的考虑借鉴了 models of the human visual system</li>
<li>基于渲染，还考虑了 point-like structures（例如
fireflies）的影响</li>
<li>full-reference image difference algorithm
<ul>
<li>输出一张图片，表示 difference</li>
</ul></li>
<li>收到 iCAM framework 的启发，评估包括
<ul>
<li>contrast sensitivity functions</li>
<li>feature detection models</li>
<li>a perceptually uniform color space</li>
</ul></li>
<li>试图实现和人类感知一致的 metric
<ul>
<li>做了<strong>用户实验</strong></li>
<li>包括自然图片与生成图片</li>
</ul></li>
</ul>
<h1 id="goals-and-limitations">Goals and Limitations</h1>
<ul>
<li>FLIP 的 error 希望正比于人眼在切换图片时的感知 error
<ul>
<li>flipping back and forth between the images, located in the same
position and without blanking in between.</li>
</ul></li>
<li>和<strong>观察者的距离</strong>、<strong>像素分辨率</strong>相关
<ul>
<li>需要选择一个 color space 和距离成正比
<ul>
<li><strong>perceptually uniform color space</strong></li>
</ul></li>
</ul></li>
<li>point content（fireflies）、edge content 的变化对于感知来说比较明显
<ul>
<li>需要特别重视</li>
</ul></li>
<li>flipping 这个操作对于渲染来说很重要，大家都是这样看 error 的</li>
<li>设计理念
<ul>
<li>ease-of-use</li>
<li>复杂度低</li>
<li>用户指定的参数要少</li>
<li><strong>不能处理 HDR 图片</strong></li>
</ul></li>
<li>无法检测视觉掩蔽现象（visual masking）
<ul>
<li>当一个视觉刺激（目标刺激）被另一个或多个同时呈现的视觉刺激（掩蔽刺激）所干扰时，目标刺激的感知能力降低的现象。简单来说，就是一些视觉元素会干扰我们对其他元素的识别。</li>
<li>但是我们的算法无法识别（计算机不会被干扰）</li>
</ul></li>
</ul>
<h1 id="previous-work">Previous Work</h1>
<ul>
<li>一个 Survey：<a target="_blank" rel="noopener" href="https://doi.org/10.1155/2013/905685">Seven
Challenges in Image Quality Assessment: Past, Present, and Future
Research</a></li>
<li>分类：根据需要 reference 的程度进行划分
<ul>
<li>full-reference algorithms（FLIP 是这种）</li>
<li>reduced-reference algorithms</li>
<li>no-reference algorithms</li>
</ul></li>
<li>分类：出结果
<ul>
<li>输出一个值：Guetzli（2017）、PieAPP（2018-CVPR）、Multi-scale
Structural Similarity（2003）</li>
<li>每个像素输出一个值（<span style="color: red;">FLIP
只对比这种</span>）
<ul>
<li>表示这个像素有误差可见的可能性：HDR-VDP-2（2011-SIG）、CNN-based
metric（2018-TOG）
<ul>
<li>where the distortions are visible</li>
</ul></li>
<li>表示这个像素误差的大小：iCAM（2004）、S-CIELAB and
CIEDE2000（2003）、SSIM（2004-TIP）、deep features（2018-CVPR）</li>
</ul></li>
</ul></li>
<li>对比场景：alternating images with no blank image shown between the
flips</li>
</ul>
<h2 id="对比算法">对比算法</h2>
<ul>
<li>Symmetric mean absolute percentage error (SMAPE)
<ul>
<li>应用：降噪网络的训练</li>
</ul></li>
</ul>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/SMAPE.png"></p>
<ul>
<li>SSIM
<ul>
<li>与：average value, the variance, and the correlation of luminances
相关</li>
</ul></li>
<li>S-CIELAB（FLIP 继承和发展了这个方法）
<ul>
<li>考虑了 human visual system (HVS)</li>
<li>filter the images using contrast sensitivity functions</li>
<li>在 perceptually uniform color space 中计算距离</li>
</ul></li>
<li>HDR-VDP-2
<ul>
<li>输出 error 被发现的概率，HDR（设计应用）/LDR 都可以使用</li>
</ul></li>
<li>网络
<ul>
<li>网络的中间表示能用于计算区别</li>
<li>PieAPP：网络输出每张图的失真程度</li>
<li>user markings：输出 visibility map</li>
</ul></li>
<li>Butteraugli：part of the Guetzli system to optimize <strong>JPEG
compression</strong></li>
</ul>
<h1 id="algorithm">Algorithm</h1>
<ul>
<li>FLIP 输出 error map，每个点的值正比于感知误差的大小</li>
<li>FLIP pipeline 如下
<ul>
<li>color pipeline
<ul>
<li>spatial filter
<ul>
<li>基于 human visual system’s contrast sensitivity functions
(CSFs)</li>
<li>去除在给定观察距离、给定像素分辨率下感知不到的高频信息</li>
</ul></li>
<li>转化成：perceptually uniform color space (PUCS) <span class="math inline">\(\text{L}^{\ast}\text{a}^{\ast}\text{b}^{\ast}\)</span>
<ul>
<li>one achromatic（明度）and two chromatic components（颜色相关）</li>
<li>简单，但是有缺陷</li>
<li>不能处理 Hunt
effect（随着亮度的增加，人们对颜色的感知也会变得更加鲜艳）</li>
</ul></li>
<li>为了处理 Hunt effect，我们做简单调整</li>
<li>计算 difference，映射到 <span class="math inline">\([0,1]\)</span></li>
</ul></li>
<li>feature pipeline</li>
</ul></li>
</ul>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/fig1-flip-pipeline.png"></p>
<h2 id="color-pipeline">Color Pipeline</h2>
<ul>
<li>输入为 sRGB（<span class="math inline">\(\{R_s,G_s,B_s\}\)</span>），处理完之后要考虑 Hunt
效应（低亮度的 chromatic errors 要变小）</li>
</ul>
<h3 id="spatial-filtering">Spatial Filtering</h3>
<h4 id="step-1">Step 1</h4>
<ul>
<li>先线性化成 <span class="math inline">\(\{R&#39;,G&#39;,B&#39;\}\)</span>
<ul>
<li>standard linearization formula</li>
<li>代码里是这么写的，3 通道分别计算</li>
</ul></li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cpp/FLIP.h</span></span><br><span class="line"><span class="function">HOST_DEVICE_FOR_CUDA <span class="type">static</span> <span class="keyword">inline</span> <span class="type">float</span> <span class="title">sRGBToLinearRGB</span><span class="params">(<span class="type">float</span> sC)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (sC &lt;= <span class="number">0.04045f</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> sC / <span class="number">12.92f</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">powf</span>((sC + <span class="number">0.055f</span>) / <span class="number">1.055f</span>, <span class="number">2.4f</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>spatial filtering 在补色空间中做
<ul>
<li>CSFs 中：1 achromatic channel, 1 red-green channel, and 1
blue-yellow channel</li>
<li>S-CIELAB research 中使用的会带来 undesirable color shifts</li>
<li>我们选择 <span class="math inline">\(\text{Y}_{\text{y}}\text{c}_{\text{x}}\text{c}_{\text{z}}\)</span>
空间（<span class="math inline">\(\text{L}^{\ast}\text{a}^{\ast}\text{b}^{\ast}\)</span>
的线性版本）
<ul>
<li><span class="math inline">\(\text{Y}_{\text{y}}\)</span>：achromatic
channel</li>
<li><span class="math inline">\(\text{c}_{\text{x}}\)</span>：red-green
channel</li>
<li><span class="math inline">\(\text{c}_{\text{z}}\)</span>：blue-yellow
channel</li>
</ul></li>
</ul></li>
<li><span id="tcode1">转换</span></li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pImage[i] = color3::<span class="built_in">XYZToYCxCz</span>(color3::<span class="built_in">LinearRGBToXYZ</span>(pImage[i]));</span><br></pre></td></tr></table></figure>
<details>
<summary>
具体转换逻辑如下，点击展开
</summary>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">HOST_DEVICE_FOR_CUDA <span class="type">static</span> <span class="keyword">inline</span> color3 <span class="title">LinearRGBToXYZ</span><span class="params">(color3 RGB)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Source: https://www.image-engineering.de/library/technotes/958-how-to-convert-between-srgb-and-ciexyz</span></span><br><span class="line">    <span class="comment">// Assumes D65 standard illuminant.</span></span><br><span class="line">    <span class="type">const</span> <span class="type">float</span> a11 = <span class="number">101355520f</span> / <span class="number">24577794.0f</span>;</span><br><span class="line">    <span class="type">const</span> <span class="type">float</span> a12 = <span class="number">8788810.0f</span> / <span class="number">24577794.0f</span>;</span><br><span class="line">    <span class="type">const</span> <span class="type">float</span> a13 = <span class="number">4435075.0f</span> / <span class="number">24577794.0f</span>;</span><br><span class="line">    <span class="type">const</span> <span class="type">float</span> a21 = <span class="number">2613072.0f</span> / <span class="number">12288897.0f</span>;</span><br><span class="line">    <span class="type">const</span> <span class="type">float</span> a22 = <span class="number">8788810.0f</span> / <span class="number">12288897.0f</span>;</span><br><span class="line">    <span class="type">const</span> <span class="type">float</span> a23 = <span class="number">887015.0f</span> / <span class="number">12288897.0f</span>;</span><br><span class="line">    <span class="type">const</span> <span class="type">float</span> a31 = <span class="number">1425312.0f</span> / <span class="number">73733382.0f</span>;</span><br><span class="line">    <span class="type">const</span> <span class="type">float</span> a32 = <span class="number">8788810.0f</span> / <span class="number">73733382.0f</span>;</span><br><span class="line">    <span class="type">const</span> <span class="type">float</span> a33 = <span class="number">70074185.0f</span> / <span class="number">73733382.0f</span>;</span><br><span class="line">    color3 XYZ;</span><br><span class="line">    XYZ.x = a11 * RGB.x + a12 * RGB.y + a13 * RGB.z;</span><br><span class="line">    XYZ.y = a21 * RGB.x + a22 * RGB.y + a23 * RGB.z;</span><br><span class="line">    XYZ.z = a31 * RGB.x + a32 * RGB.y + a33 * RGB.z;</span><br><span class="line">    <span class="keyword">return</span> XYZ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function">HOST_DEVICE_FOR_CUDA <span class="type">static</span> <span class="keyword">inline</span> color3 <span class="title">XYZToYCxCz</span><span class="params">(color3 XYZ, <span class="type">const</span> color3 invReferenceIlluminant = INV_DEFAULT_ILLUMINANT)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// The default illuminant is D65.</span></span><br><span class="line">    XYZ = XYZ * invReferenceIlluminant;</span><br><span class="line">    <span class="type">float</span> Y = <span class="number">116.0f</span> * XYZ.y - <span class="number">16.0f</span>;</span><br><span class="line">    <span class="type">float</span> Cx = <span class="number">500.0f</span> * (XYZ.x - XYZ.y);</span><br><span class="line">    <span class="type">float</span> Cz = <span class="number">200.0f</span> * (XYZ.y - XYZ.z);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">color3</span>(Y, Cx, Cz);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<ul>
<li>现在得到了 <span class="math inline">\(\{S_{\text{Y}_{\text{y}}},S_{\text{c}_{\text{x}}},S_{\text{c}_{\text{z}}}\}\)</span></li>
</ul>
<h4 id="step-2">Step 2</h4>
<ul>
<li>CSFs 对于敏感度的定义：cycles per degree of visual angle 的函数
<ul>
<li>我们这里进行转化，one cycle corresponds to two pixels</li>
</ul></li>
<li>与观察距离和像素分辨率相关，计算 PPD（pixels per degree）<span class="math inline">\(p\)</span>
<ul>
<li>观察距离 <span class="math inline">\(d\)</span> 米</li>
<li>显示屏大小（单位米）：<span class="math inline">\(W_{\text{m}}\times
H_{\text{m}}\)</span></li>
<li>分辨率：<span class="math inline">\(W_{\text{p}}\times
H_{\text{p}}\)</span></li>
</ul></li>
</ul>
<p><span class="math display">\[
p=d\dfrac{W_{\text{p}}}{W_{\text{m}}}\dfrac{\pi}{180}
\]</span></p>
<h4 id="step-3">Step 3</h4>
<ul>
<li><strong>频域滤波</strong>：<strong>选择滤波器，频率滤波转换为空域滤波，<span class="math inline">\(3\sigma\)</span> 确定空域的范围</strong></li>
<li>我们是基于 1988 年的 CSFs，但是这些 CSFs 不是度量 <span class="math inline">\(\text{Y}_{\text{y}}\text{c}_{\text{x}}\text{c}_{\text{z}}\)</span>
空间的
<ul>
<li>但是这个带来的 inaccuracy 是微不足道的</li>
<li>CSFs：频域
<ul>
<li>achromatic CSF：带通滤波器（bind-pass filter）</li>
<li>chromatic CSF：低通滤波器（low-pass filter）</li>
</ul></li>
</ul></li>
<li>我们需要保留直流分量（DC），因此都修改为低通
<ul>
<li>直流分量表示平均值（不变的）</li>
</ul></li>
<li>low-pass filter 如下</li>
</ul>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/eq2-low-pass-filter.png"></p>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/eq2-sup.png"></p>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/tab1-filter-params.png"></p>
<ul>
<li>GPU 快速 filter，将其转化为 Gaussians 的和
<ul>
<li>直接使用上面的低通会导致振铃效应（ringing artifacts）</li>
<li>每个通道，我们使用 1-2 个 zero-centered Gaussian 代替</li>
</ul></li>
<li>频域高斯</li>
</ul>
<p><span class="math display">\[
G(f)=ae^{-bf^2}
\]</span></p>
<ul>
<li>转化为空域（逆傅里叶变换）：<span class="math inline">\(\sigma=\sqrt{\dfrac{b}{2{\pi}^2}}\)</span></li>
</ul>
<p><span class="math display">\[
g(x)=a\sqrt{\dfrac{\pi}{b}}\exp(-\frac{\pi^2}{b}x^2)
\]</span></p>
<ul>
<li>使用 Matlab
找到最优近似：近似的时候是<strong>近似频域</strong>得到最优的 <span class="math inline">\(b(,a)\)</span>
<ul>
<li>filter 之后有归一化，因此如果只有一个 Gaussian
的话，倍数系数不用管</li>
<li>两组表示两个</li>
</ul></li>
</ul>
<table>
<colgroup>
<col style="width: 69%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">参数</th>
<th style="text-align: center;">值</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(b_{\text{Y}_{\text{y}}}\)</span></td>
<td style="text-align: center;">0.0047</td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(b_{\text{c}_{\text{x}}}\)</span></td>
<td style="text-align: center;">0.0053</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(a_{\text{c}_{\text{x}}},b_{\text{c}_{\text{x}}}\)</span>（2
组）</td>
<td style="text-align: center;">(34.1,0.04), (13.5,0.025)</td>
</tr>
</tbody>
</table>
<ul>
<li>频域区间：<span class="math inline">\(\left[-\dfrac{p}{2},\dfrac{p}{2}\right]\)</span>，<span class="math inline">\(p\)</span> 为采样频率
<ul>
<li>S-CIELAB and CIEDE2000 工作</li>
</ul></li>
<li>转换为空域：<span class="math inline">\(\Delta=\dfrac{1}{F_s}=\dfrac{1}{p}\)</span>
<ul>
<li><span class="math inline">\(\Delta\)</span>：刚好对应频率中最近的两个采样点在空域中的距离</li>
<li>单个高斯模型，<span class="math inline">\(3\sigma\)</span> 保留了
99.7% 的能量</li>
<li>因为我们使用的高斯都是 zero-centered，使用最大的 <span class="math inline">\(3\sigma\)</span> 就能保证所有高斯都保留 <span class="math inline">\(\ge\)</span> 99.7% 的能量</li>
<li>这里直接考虑保留空域中高斯的 <span class="math inline">\(3\sigma\)</span>（<span style="color: red;">神奇，我还以为会考虑频域，转化到空域</span>）
<ul>
<li><span class="math inline">\(b_{\max}=0.04\)</span></li>
</ul></li>
</ul></li>
</ul>
<p><span class="math display">\[
\begin{aligned}
r_{\max}
&amp;=\left\lceil{\sqrt{\dfrac{3\sigma_{\text{space}\max}}{\Delta}}}\right\rceil\\
&amp;=\left\lceil{\sqrt{3p\cdot\dfrac{b_{\max}}{2{\pi}^2}}}\right\rceil\\
\end{aligned}
\]</span></p>
<ul>
<li>1D filter 的范围</li>
</ul>
<p><span class="math display">\[
0,\pm\Delta,\pm2\Delta,\cdots,\pm r\Delta
\]</span></p>
<ul>
<li>2D filter 的范围</li>
</ul>
<p><span class="math display">\[
\begin{array}{c}
\text{evaluate}:d(x,y)=\Delta\sqrt{x^2+y^2}\\
(x,y),x,y\in\{0,\pm1,\pm2,\cdots,\pm r\}\\
\end{array}
\]</span></p>
<ul>
<li><strong>权重归一化</strong></li>
<li>现在得到了 filtered colord <span class="math inline">\(\left\{\widetilde{\text{Y}}_{\text{y}},\widetilde{\text{c}}_{\text{x}},\widetilde{\text{c}}_{\text{z}}\right\}\)</span></li>
<li>需要转换到 RGB 空间，然后 clamp 到 <span class="math inline">\([0,1]^3\)</span> 之间
<ul>
<li>不然 filter 之后可能超出 RGB 范围</li>
</ul></li>
</ul>
<h3 id="perceptually-uniform-color-space">Perceptually Uniform Color
Space</h3>
<ul>
<li>这个空间中的距离和感知距离成正比</li>
<li>clamp 之后的 RGB 转化到 <span class="math inline">\(\text{L}^{\ast}\text{a}^{\ast}\text{b}^{\ast}\)</span>
空间，得到 <span class="math inline">\(\left\{\widetilde{L^{\ast}},\widetilde{a^{\ast}},\widetilde{b^{\ast}}\right\}\)</span></li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Move from linear RGB to CIELab.</span></span><br><span class="line">filteredYCxCzReference = color3::<span class="built_in">XYZToCIELab</span>(color3::<span class="built_in">LinearRGBToXYZ</span>(filteredYCxCzReference));</span><br></pre></td></tr></table></figure>
<ul>
<li><code>LinearRGBToXYZ</code> <a href="#tcode1">上面有了</a></li>
</ul>
<details>
<summary>
具体转换逻辑如下，点击展开
</summary>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">HOST_DEVICE_FOR_CUDA <span class="type">static</span> <span class="keyword">inline</span> color3 <span class="title">XYZToCIELab</span><span class="params">(color3 XYZ, <span class="type">const</span> color3 invReferenceIlluminant = INV_DEFAULT_ILLUMINANT)</span> </span>&#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">float</span> delta = <span class="number">6.0f</span> / <span class="number">29.0f</span>;</span><br><span class="line">    <span class="type">const</span> <span class="type">float</span> deltaSquare = delta * delta;</span><br><span class="line">    <span class="type">const</span> <span class="type">float</span> deltaCube = delta * deltaSquare;</span><br><span class="line">    <span class="type">const</span> <span class="type">float</span> factor = <span class="number">1.0f</span> / (<span class="number">3.0f</span> * deltaSquare);</span><br><span class="line">    <span class="type">const</span> <span class="type">float</span> term = <span class="number">4.0f</span> / <span class="number">29.0f</span>;</span><br><span class="line">    <span class="comment">// The default illuminant is D65.</span></span><br><span class="line">    XYZ = XYZ * invReferenceIlluminant;</span><br><span class="line">    XYZ.x = (XYZ.x &gt; deltaCube ? <span class="built_in">powf</span>(XYZ.x, <span class="number">1.0f</span> / <span class="number">3.0f</span>) : factor * XYZ.x + term);</span><br><span class="line">    XYZ.y = (XYZ.y &gt; deltaCube ? <span class="built_in">powf</span>(XYZ.y, <span class="number">1.0f</span> / <span class="number">3.0f</span>) : factor * XYZ.y + term);</span><br><span class="line">    XYZ.z = (XYZ.z &gt; deltaCube ? <span class="built_in">powf</span>(XYZ.z, <span class="number">1.0f</span> / <span class="number">3.0f</span>) : factor * XYZ.z + term);</span><br><span class="line">    <span class="type">float</span> L = <span class="number">116.0f</span> * XYZ.y - <span class="number">16.0f</span>;</span><br><span class="line">    <span class="type">float</span> a = <span class="number">500.0f</span> * (XYZ.x - XYZ.y);</span><br><span class="line">    <span class="type">float</span> b = <span class="number">200.0f</span> * (XYZ.y - XYZ.z);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">color3</span>(L, a, b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<ul>
<li>考虑 Hunt 效应：除了亮度都一样</li>
</ul>
<table>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">亮度低，对比弱</th>
<th style="text-align: center;">亮度高，对比强</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img src="/2024/06/02/CG/Papers/2020/FLIP/color3.png"><img src="/2024/06/02/CG/Papers/2020/FLIP/color4.png"></td>
<td style="text-align: center;"><img src="/2024/06/02/CG/Papers/2020/FLIP/color1.png"><img src="/2024/06/02/CG/Papers/2020/FLIP/color2.png"></td>
</tr>
</tbody>
</table>
<ul>
<li><p>转换为 <span class="math inline">\(\left\{\widetilde{L_{\text{h}}^{\ast}},\widetilde{a_{\text{h}}^{\ast}},\widetilde{b_{\text{h}}^{\ast}}\right\}\)</span></p>
<ul>
<li><p><span class="math inline">\(L\)</span> 本身范围就是 [0,
100]，<span class="math inline">\(a,b\)</span> 没有限制</p></li>
<li><p><strong>直观上理解</strong>：给 <span class="math inline">\(a,b\)</span> 的差距乘上 <span class="math inline">\(L\)</span> 作为系数</p></li>
</ul></li>
</ul>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/eq7-hunt-transform.png"></p>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/eq7-hunt-transform2.png"></p>
<h3 id="color-metric">Color Metric</h3>
<ul>
<li>之前的 metric 只在 distance 比较小的时候有用</li>
<li>渲染的 distance 可能很大：fireflies</li>
<li>HyAB：a metric designed to handle larger color distances
<ul>
<li>HyAB distance, <span class="math inline">\(\Delta\text{E}_{\text{HyAB}}\)</span></li>
</ul></li>
</ul>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/eq8-HyAS-distance.png"></p>
<ul>
<li>最大为 <span class="math inline">\(308\)</span>
<ul>
<li>输入 RGB 为（<span class="math inline">\(\{0,0,1\},\{0,1,0\}\)</span>）</li>
<li>全黑白是 <span class="math inline">\(100\)</span></li>
</ul></li>
<li>reduce the gap between <strong>large differences in
luminance</strong> versus <strong>large differences in
chrominance</strong>
<ul>
<li>高端（接近 1 部分）压缩</li>
<li>进行一个映射：<span class="math inline">\(q_c=0.7\)</span></li>
</ul></li>
</ul>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/compress-top.png"></p>
<ul>
<li>映射之后
<ul>
<li>此时上面最大值为：203（Hunt adjusted 之后变了，但还是最大值）</li>
<li><span class="math inline">\(q_c\)</span> 映射之后：41</li>
</ul></li>
<li>之后再归一化到 <span class="math inline">\([0,1]\)</span></li>
<li>归一化的时候，进一步对 big value 进行压缩
<ul>
<li>给两个超参：<span class="math inline">\(p_c=0.4, p_t=0.95\)</span>
<ul>
<li>映射：输入为 <span class="math inline">\(\Delta\text{E}_{\text{HyAB}}\)</span>
<ul>
<li><span class="math inline">\([0,p_cc_{\max})\to[0,p_t)\)</span>：线性映射</li>
<li><span class="math inline">\([p_cc_{\max},c_{\max}]\to[p_t,1]\)</span>：用上面的压缩</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/fig4.png"></p>
<h2 id="feature-pipeline">Feature Pipeline</h2>
<ul>
<li>之前的工作能比较好检测 edge，但是对 point 不太行</li>
<li>两张图都过一遍，对比响应不同的地方</li>
</ul>
<h3 id="feature-detection">Feature Detection</h3>
<ul>
<li>转换到 <span class="math inline">\(\text{Y}_{\text{y}}\text{c}_{\text{x}}\text{c}_{\text{z}}\)</span>
空间，然后在 <span class="math inline">\(\text{Y}_{\text{y}}\)</span> 做
feature detection
<ul>
<li>高频空间信息基本都在这个通道上</li>
<li>归一化到 <span class="math inline">\([0,1]\)</span></li>
</ul></li>
<li>输出值都在 <span class="math inline">\([0,1]\)</span> 之间</li>
<li>kernel 卷积，权重和都为 1/-1</li>
<li>ppd（<span class="math inline">\(p\)</span>）相关（pixel per
angle）</li>
<li>edge 检测：2D 对称高斯的一阶微分
<ul>
<li>人眼对边缘的响应：<span class="math inline">\(\omega=0.082
\deg\)</span></li>
<li>我们使用的 filter 的标准差：<span class="math inline">\(\sigma(w,p)=\dfrac{1}{2}wp\)</span>
<ul>
<li>filter 半径为 <span class="math inline">\(3\sigma\)</span></li>
<li><span class="math inline">\(\lceil3\sigma(\omega, p)\rceil\)</span>
pixels</li>
</ul></li>
<li>实现上，<span class="math inline">\(x,y\)</span>
方向各来一遍，得到的图片记作 <span class="math inline">\(\Vert\nabla
\mathrm{I}\Vert\)</span>，每个像素对应的值称为 edge feature value</li>
</ul></li>
<li>point 检测：2D 对称高斯的一阶微分
<ul>
<li>参数和实现都类似</li>
<li>得到的图片记作 <span class="math inline">\(\Vert\nabla
\mathrm{I}^2\Vert\)</span>，每个像素对应的值称为 point feature
value</li>
</ul></li>
</ul>
<h3 id="feature-metric">Feature Metric</h3>
<ul>
<li>edge/point 不太会出现在同一个像素里</li>
<li><span class="math inline">\(q_{\text{f}}=0.5\)</span>
<ul>
<li><span class="math inline">\(/\sqrt{2}\)</span>：让结果在 <span class="math inline">\([0,1]\)</span> 之间，<span style="color:red">为啥？</span></li>
</ul></li>
</ul>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/eq9.png"></p>
<h2 id="final-difference-map">Final Difference Map</h2>
<ul>
<li>都是 <span class="math inline">\([0,1]\)</span></li>
</ul>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/eq10-final-result.png"></p>
<h1 id="pooling">Pooling</h1>
<ul>
<li>降分辨率，特殊的变成一个值</li>
<li>信息不可逆的丢失</li>
<li>压缩数据</li>
</ul>
<h2 id="histogram">histogram</h2>
<ul>
<li>histogram：<span class="math inline">\(x\to n(x)\)</span>
<ul>
<li>weighted histogram：<span class="math inline">\(n\to x\cdot
n(x)\)</span></li>
</ul></li>
<li>spp 越高，error 越集中在小的部分，但是高 error
的数量也在增加（firefly 的概率在增加）
<ul>
<li>firefly 的问题可能导致 spp 增加时，error 有所增加</li>
</ul></li>
<li>进一步压缩
<ul>
<li>weighted median and the arithmetic mean
<ul>
<li>mean：容易求导，可以用于 NN</li>
</ul></li>
<li>25% and 75% weighted percentiles (first and third weighted
quartiles)：分位数</li>
<li>the minimum value, and the maximum value</li>
</ul></li>
</ul>
<h1 id="evaluation">Evaluation</h1>
<ul>
<li>两个部分
<ul>
<li>analyze the error maps</li>
<li>user study</li>
</ul></li>
<li>数据集
<ul>
<li>自己生成</li>
<li>前人：LocVis、the CS-IQ image data bases、<span class="math inline">\(\cdots\)</span></li>
</ul></li>
<li>artifacts 类型
<ul>
<li>aliasing、Monte Carlo noise、color shifts</li>
<li>退化的自然图片：compression、dither（抖动）、blur、contrast
changes</li>
</ul></li>
<li>对比 metric：为了展示，都调整输出到 <span class="math inline">\([0,1]\)</span>
<ul>
<li>HDR-VDP-2、LPIPS、the CNN visibility metric(CNN, for
short)、Butteraugli
<ul>
<li>输出的 <span class="math inline">\([0,1]\)</span>，error
小到大，修改他们的 color 映射到我们这个</li>
</ul></li>
<li>SMAPE：一般用于 HDR</li>
<li>Euclidean RGB distance
<ul>
<li>可能的最大值认为是 RGB cube，归一化</li>
</ul></li>
<li>S-CIELAB
<ul>
<li>最大值为 259（blue、green）</li>
</ul></li>
<li>SSIM：<span class="math inline">\([-1,1]\)</span>
<ul>
<li>no error：1，max error：0</li>
<li>negative values can arise due to the correlation factor</li>
<li><span class="math inline">\(s&#39;=1-s\)</span></li>
</ul></li>
<li>PieAPP：<span class="math inline">\((-\infty,\infty)\)</span>
<ul>
<li>no error：0，max error：<span class="math inline">\(\pm\infty\)</span></li>
<li><span class="math inline">\(a&#39;=\left\vert{2-\dfrac{1}{1+e^a}}\right\vert\)</span></li>
</ul></li>
</ul></li>
<li>项目主页上有展示</li>
</ul>
<h2 id="analysis">Analysis</h2>
<h3 id="figure-9">Figure 9</h3>
<ul>
<li>每一个方法和 FLIP 比一张图</li>
<li>CNN、LPIPS、PieAPP
<ul>
<li>定位不准（网络方法的通病）（localization）</li>
<li>会将 error 部分的周围也当作 error（扩散）</li>
</ul></li>
<li>HDR-VDP-2
<ul>
<li>ringing artifacts</li>
<li>但是说实话这里 diffuse 的那种噪声 FLIP 显示的不好</li>
</ul></li>
<li>Butteraugli
<ul>
<li>偶尔会对不明显的差异反应过度</li>
<li>localization 问题</li>
</ul></li>
<li>S-CIELAB
<ul>
<li>band-pass filter 的问题，会导致全局的 blur
<ul>
<li>filter 之后平均了整体的灰度，导致结果上相似，error 不见了</li>
</ul></li>
</ul></li>
</ul>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/error-S-CIELAB.png"></p>
<ul>
<li>SSIM
<ul>
<li>没有考虑 pdd，导致将很多观察不到的误差都展示出来了</li>
<li>有一些不可解释的结果值</li>
</ul></li>
<li>SMAPE
<ul>
<li>因为除了像素真值（relative
error），导致暗处误差放大，但实际上这些观察不到</li>
<li>FLIP 通过 Hunt-adjustment 克服了这一点</li>
</ul></li>
</ul>
<h3 id="figure-10">Figure 10</h3>
<ul>
<li>MCPT 不同 spp 结果，所有方法比 error</li>
<li>一致性：spp 增加，error 变小（特殊：firefly 增多）</li>
<li>FLIP
处理不了的问题：<strong>masking</strong>（有大的不同，但是因为其他原因我们观察不到）
<ul>
<li>where image differences are present, but also hard to notice due to
high amounts of irregularities or contrast shifts</li>
<li>FLIP 会 overestimation，下图是一个示例</li>
</ul></li>
</ul>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/fig11-masking.png"></p>
<ul>
<li>性能：180 ms
<ul>
<li>unoptimized GPU implementation</li>
<li><span class="math inline">\(p=67\text{ PPD}\)</span></li>
<li>1920 × 1080</li>
<li>NVIDIA RTX 2080 Ti</li>
</ul></li>
</ul>
<h2 id="user-study">User Study</h2>
<ul>
<li>ref/test flip 切换，周期为 0.5s（每秒两张图？）
<ul>
<li>图片顺序随机</li>
<li>不同 metric 的 error map 的顺序也是随机的</li>
</ul></li>
<li>用户
<ul>
<li>打分：0-3（metric 和 error 对应的差到好）</li>
<li>关注异常
<ul>
<li>false positives (indicating differences when there are none)</li>
<li>false negatives (not indicating differences when they exist)</li>
</ul></li>
<li>关注 magnitude and localization</li>
<li>距离满足 <span class="math inline">\(p=67\)</span> pdd</li>
</ul></li>
<li>数据组成
<ul>
<li>11 组 rendered images（R）</li>
<li>10 组 natural images（N）
<ul>
<li>8 其他数据集</li>
<li>2 我们进行 distortion</li>
</ul></li>
</ul></li>
<li>用户
<ul>
<li>mainly <strong>computer graphics experts</strong></li>
<li>还包括 color scientists and computer vision researchers</li>
</ul></li>
<li>结果如下：FLIP 平均分数 2.1</li>
</ul>
<p><img src="/2024/06/02/CG/Papers/2020/FLIP/fig3-user-study.png"></p>
<h2 id="discussion">Discussion</h2>
<ul>
<li>FLIP 好的原因：主要和<a href="#analysis">上面的分析</a>类似</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/CG/" rel="tag"># CG</a>
              <a href="/tags/Paper/" rel="tag"># Paper</a>
              <a href="/tags/HPG/" rel="tag"># HPG</a>
              <a href="/tags/CGIT/" rel="tag"># CGIT</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/05/31/CG/Papers/2023/NIF/" rel="prev" title="(论文)[2023-HPG] Neural Intersection Function">
                  <i class="fa fa-chevron-left"></i> (论文)[2023-HPG] Neural Intersection Function
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/06/05/CG/Papers/2021/HDR-FLIP/" rel="next" title="(论文)[2021-EG-ShortPaper] Visualizing Errors in Rendered High Dynamic Range Images">
                  (论文)[2021-EG-ShortPaper] Visualizing Errors in Rendered High Dynamic Range Images <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2021 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">banbao(990)</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>


  
    <script src='https://unpkg.com/mermaid/dist/mermaid.min.js'></script>
  
    <script>
      if (window.mermaid) {
        mermaid.initialize({theme: 'forest'});
      }
    </script>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.1.7/mermaid.min.js","integrity":"sha256-G58AID1YoX5YaEtWfXSI0VLrZ6N4kvNvwg0BI8zUFxE="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>

  <script src="/js/third-party/fancybox.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
